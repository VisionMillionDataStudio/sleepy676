# é—®å·è°ƒæŸ¥å…ƒç´ æ£€æµ‹æ£€æµ‹ç³»ç»Ÿæºç åˆ†äº«
 # [ä¸€æ¡é¾™æ•™å­¦YOLOV8æ ‡æ³¨å¥½çš„æ•°æ®é›†ä¸€é”®è®­ç»ƒ_70+å…¨å¥—æ”¹è¿›åˆ›æ–°ç‚¹å‘åˆŠ_Webå‰ç«¯å±•ç¤º]

### 1.ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

é¡¹ç›®å‚è€ƒ[AAAI Association for the Advancement of Artificial Intelligence](https://gitee.com/qunmasj/projects)

é¡¹ç›®æ¥æº[AACV Association for the Advancement of Computer Vision](https://kdocs.cn/l/cszuIiCKVNis)

ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

éšç€ä¿¡æ¯æŠ€æœ¯çš„è¿…çŒ›å‘å±•ï¼Œé—®å·è°ƒæŸ¥ä½œä¸ºä¸€ç§é‡è¦çš„æ•°æ®æ”¶é›†æ‰‹æ®µï¼Œå¹¿æ³›åº”ç”¨äºå¸‚åœºç ”ç©¶ã€ç¤¾ä¼šç§‘å­¦ã€å¿ƒç†å­¦ç­‰å¤šä¸ªé¢†åŸŸã€‚ä¼ ç»Ÿçš„é—®å·è°ƒæŸ¥å¾€å¾€ä¾èµ–äºäººå·¥æ•°æ®å½•å…¥å’Œåˆ†æï¼Œæ•ˆç‡ä½ä¸‹ä¸”å®¹æ˜“å‡ºç°äººä¸ºé”™è¯¯ã€‚è¿‘å¹´æ¥ï¼Œéšç€æ·±åº¦å­¦ä¹ æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼Œå°¤å…¶æ˜¯ç›®æ ‡æ£€æµ‹ç®—æ³•çš„å¿«é€Ÿå‘å±•ï¼ŒåŸºäºè®¡ç®—æœºè§†è§‰çš„è‡ªåŠ¨åŒ–é—®å·è°ƒæŸ¥å…ƒç´ æ£€æµ‹ç³»ç»Ÿé€æ¸æˆä¸ºç ”ç©¶çš„çƒ­ç‚¹ã€‚YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—ç®—æ³•å› å…¶é«˜æ•ˆçš„å®æ—¶æ£€æµ‹èƒ½åŠ›ï¼Œå·²æˆä¸ºç›®æ ‡æ£€æµ‹é¢†åŸŸçš„é‡è¦å·¥å…·ã€‚YOLOv8ä½œä¸ºè¯¥ç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå…·æœ‰æ›´å¼ºçš„ç‰¹å¾æå–èƒ½åŠ›å’Œæ›´é«˜çš„æ£€æµ‹ç²¾åº¦ï¼Œä¸ºé—®å·è°ƒæŸ¥å…ƒç´ çš„è‡ªåŠ¨è¯†åˆ«æä¾›äº†æ–°çš„å¯èƒ½æ€§ã€‚

æœ¬ç ”ç©¶æ—¨åœ¨åŸºäºæ”¹è¿›çš„YOLOv8æ¨¡å‹ï¼Œæ„å»ºä¸€ä¸ªé«˜æ•ˆçš„é—®å·è°ƒæŸ¥å…ƒç´ æ£€æµ‹ç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿå°†é’ˆå¯¹ç‰¹å®šçš„æ•°æ®é›†è¿›è¡Œè®­ç»ƒå’Œä¼˜åŒ–ï¼Œæ•°æ®é›†åŒ…å«3100å¼ å›¾åƒï¼Œæ¶µç›–äº†7ä¸ªç±»åˆ«çš„é—®å·å…ƒç´ ï¼ŒåŒ…æ‹¬ä¸»é—®é¢˜ã€å­é—®é¢˜ã€ç­”æ¡ˆé€‰é¡¹ã€ä¸‹æ‹‰èœå•ã€æ–‡æœ¬æ¡†ã€è¯„åˆ†æè¿°å’Œä¸‹ä¸€æ­¥æŒ‰é’®ç­‰ã€‚è¿™äº›å…ƒç´ åœ¨é—®å·è®¾è®¡ä¸­æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ï¼Œå‡†ç¡®è¯†åˆ«å’Œæå–è¿™äº›å…ƒç´ å°†ç›´æ¥å½±å“é—®å·æ•°æ®çš„è´¨é‡å’Œåç»­åˆ†æçš„å‡†ç¡®æ€§ã€‚

åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé—®å·è°ƒæŸ¥çš„å…ƒç´ æ£€æµ‹é¢ä¸´è¯¸å¤šæŒ‘æˆ˜ã€‚ä¾‹å¦‚ï¼Œé—®å·è®¾è®¡çš„å¤šæ ·æ€§å’Œå¤æ‚æ€§ä½¿å¾—å…ƒç´ çš„å½¢æ€ã€ä½ç½®å’Œå°ºå¯¸å„ä¸ç›¸åŒï¼Œä¼ ç»Ÿçš„å›¾åƒå¤„ç†æ–¹æ³•éš¾ä»¥åº”å¯¹ã€‚æ­¤å¤–ï¼Œé—®å·ä¸­å¯èƒ½å­˜åœ¨çš„å¹²æ‰°å› ç´ ï¼Œå¦‚èƒŒæ™¯å™ªå£°ã€ä¸åŒçš„å­—ä½“å’Œé¢œè‰²ç­‰ï¼Œä¹Ÿä¼šå½±å“æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚å› æ­¤ï¼ŒåŸºäºYOLOv8çš„æ”¹è¿›æ¨¡å‹å°†é€šè¿‡å¢å¼ºç½‘ç»œç»“æ„ã€ä¼˜åŒ–æŸå¤±å‡½æ•°å’Œæ•°æ®å¢å¼ºç­‰æ‰‹æ®µï¼Œæé«˜ç³»ç»Ÿåœ¨å¤æ‚ç¯å¢ƒä¸‹çš„é²æ£’æ€§å’Œå‡†ç¡®æ€§ã€‚

æœ¬ç ”ç©¶çš„æ„ä¹‰ä¸ä»…åœ¨äºæå‡é—®å·è°ƒæŸ¥å…ƒç´ çš„è‡ªåŠ¨åŒ–æ£€æµ‹èƒ½åŠ›ï¼Œæ›´åœ¨äºæ¨åŠ¨é—®å·è°ƒæŸ¥é¢†åŸŸçš„æ™ºèƒ½åŒ–è¿›ç¨‹ã€‚é€šè¿‡å®ç°é«˜æ•ˆã€å‡†ç¡®çš„å…ƒç´ æ£€æµ‹ï¼Œç ”ç©¶è€…å¯ä»¥èŠ‚çœå¤§é‡çš„æ—¶é—´å’ŒäººåŠ›æˆæœ¬ï¼Œä¸“æ³¨äºæ•°æ®åˆ†æå’Œç»“æœè§£è¯»ã€‚åŒæ—¶ï¼Œè¯¥ç³»ç»Ÿçš„æˆåŠŸåº”ç”¨å°†ä¸ºå…¶ä»–é¢†åŸŸçš„å›¾åƒè¯†åˆ«ä»»åŠ¡æä¾›å€Ÿé‰´ï¼Œä¿ƒè¿›è®¡ç®—æœºè§†è§‰æŠ€æœ¯åœ¨æ›´å¹¿æ³›åœºæ™¯ä¸­çš„åº”ç”¨ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„é—®å·è°ƒæŸ¥å…ƒç´ æ£€æµ‹ç³»ç»Ÿçš„ç ”ç©¶ï¼Œä¸ä»…å…·æœ‰é‡è¦çš„ç†è®ºä»·å€¼ï¼Œä¹Ÿå…·å¤‡å¹¿æ³›çš„å®é™…åº”ç”¨å‰æ™¯ã€‚é€šè¿‡æ·±å…¥æ¢è®¨å’Œå®è·µï¼Œæˆ‘ä»¬æœŸæœ›èƒ½å¤Ÿä¸ºé—®å·è°ƒæŸ¥çš„è‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–æä¾›æ–°çš„è§£å†³æ–¹æ¡ˆï¼Œæ¨åŠ¨ç›¸å…³é¢†åŸŸçš„ç ”ç©¶ä¸å‘å±•ã€‚

### 2.å›¾ç‰‡æ¼”ç¤º

![1.png](1.png)

![2.png](2.png)

![3.png](3.png)

##### æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ2.å›¾ç‰‡æ¼”ç¤ºâ€å’Œâ€œ3.è§†é¢‘æ¼”ç¤ºâ€å±•ç¤ºçš„ç³»ç»Ÿå›¾ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½ä¸ºè€ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨è€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå‡çº§å¦‚ä¸‹ï¼šï¼ˆå®é™…æ•ˆæœä»¥å‡çº§çš„æ–°ç‰ˆæœ¬ä¸ºå‡†ï¼‰

  ï¼ˆ1ï¼‰é€‚é…äº†YOLOV8çš„â€œç›®æ ‡æ£€æµ‹â€æ¨¡å‹å’Œâ€œå®ä¾‹åˆ†å‰²â€æ¨¡å‹ï¼Œé€šè¿‡åŠ è½½ç›¸åº”çš„æƒé‡ï¼ˆ.ptï¼‰æ–‡ä»¶å³å¯è‡ªé€‚åº”åŠ è½½æ¨¡å‹ã€‚

  ï¼ˆ2ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«æ¨¡å¼ã€‚

  ï¼ˆ3ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«ç»“æœä¿å­˜å¯¼å‡ºï¼Œè§£å†³æ‰‹åŠ¨å¯¼å‡ºï¼ˆå®¹æ˜“å¡é¡¿å‡ºç°çˆ†å†…å­˜ï¼‰å­˜åœ¨çš„é—®é¢˜ï¼Œè¯†åˆ«å®Œè‡ªåŠ¨ä¿å­˜ç»“æœå¹¶å¯¼å‡ºåˆ°tempDirä¸­ã€‚

  ï¼ˆ4ï¼‰æ”¯æŒWebå‰ç«¯ç³»ç»Ÿä¸­çš„æ ‡é¢˜ã€èƒŒæ™¯å›¾ç­‰è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåé¢æä¾›ä¿®æ”¹æ•™ç¨‹ã€‚

  å¦å¤–æœ¬é¡¹ç›®æä¾›è®­ç»ƒçš„æ•°æ®é›†å’Œè®­ç»ƒæ•™ç¨‹,æš‚ä¸æä¾›æƒé‡æ–‡ä»¶ï¼ˆbest.ptï¼‰,éœ€è¦æ‚¨æŒ‰ç…§æ•™ç¨‹è¿›è¡Œè®­ç»ƒåå®ç°å›¾ç‰‡æ¼”ç¤ºå’ŒWebå‰ç«¯ç•Œé¢æ¼”ç¤ºçš„æ•ˆæœã€‚

### 3.è§†é¢‘æ¼”ç¤º

[3.1 è§†é¢‘æ¼”ç¤º](https://www.bilibili.com/video/BV1tTsaeREbi/)

### 4.æ•°æ®é›†ä¿¡æ¯å±•ç¤º

##### 4.1 æœ¬é¡¹ç›®æ•°æ®é›†è¯¦ç»†æ•°æ®ï¼ˆç±»åˆ«æ•°ï¼†ç±»åˆ«åï¼‰

nc: 7
names: ['Answer Options', 'Drop down', 'Main question', 'Next button', 'Rating Descriptions', 'Sub questions', 'Text box']


##### 4.2 æœ¬é¡¹ç›®æ•°æ®é›†ä¿¡æ¯ä»‹ç»

æ•°æ®é›†ä¿¡æ¯å±•ç¤º

åœ¨ç°ä»£æœºå™¨å­¦ä¹ å’Œè®¡ç®—æœºè§†è§‰é¢†åŸŸï¼Œæ•°æ®é›†çš„æ„å»ºä¸é€‰æ‹©å¯¹äºæ¨¡å‹çš„è®­ç»ƒå’Œæ€§èƒ½ä¼˜åŒ–è‡³å…³é‡è¦ã€‚æœ¬ç ”ç©¶æ‰€é‡‡ç”¨çš„æ•°æ®é›†åä¸ºâ€œsleepyâ€ï¼Œæ—¨åœ¨ä¸ºæ”¹è¿›YOLOv8çš„é—®å·è°ƒæŸ¥å…ƒç´ æ£€æµ‹ç³»ç»Ÿæä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒã€‚è¯¥æ•°æ®é›†åŒ…å«ä¸ƒä¸ªä¸åŒçš„ç±»åˆ«ï¼Œå…·ä½“ä¸ºâ€œAnswer Optionsâ€ã€â€œDrop downâ€ã€â€œMain questionâ€ã€â€œNext buttonâ€ã€â€œRating Descriptionsâ€ã€â€œSub questionsâ€å’Œâ€œText boxâ€ã€‚è¿™äº›ç±»åˆ«æ¶µç›–äº†é—®å·è°ƒæŸ¥ä¸­å¸¸è§çš„å…ƒç´ ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°å¸®åŠ©æ¨¡å‹è¯†åˆ«å’Œç†è§£é—®å·çš„ç»“æ„ä¸å†…å®¹ã€‚

â€œsleepyâ€æ•°æ®é›†çš„è®¾è®¡è€ƒè™‘åˆ°äº†é—®å·è°ƒæŸ¥çš„å¤šæ ·æ€§å’Œå¤æ‚æ€§ã€‚æ¯ä¸ªç±»åˆ«çš„é€‰æ‹©éƒ½ç»è¿‡ç²¾å¿ƒæŒ‘é€‰ï¼Œä»¥ç¡®ä¿èƒ½å¤Ÿä»£è¡¨å®é™…åº”ç”¨ä¸­å¯èƒ½é‡åˆ°çš„å„ç§é—®å·å½¢å¼ã€‚ä¾‹å¦‚ï¼Œâ€œMain questionâ€ç±»åˆ«ä¸“æ³¨äºè¯†åˆ«é—®å·ä¸­çš„ä¸»è¦é—®é¢˜ï¼Œé€šå¸¸æ˜¯ç”¨æˆ·éœ€è¦å›ç­”çš„æ ¸å¿ƒå†…å®¹ï¼›è€Œâ€œAnswer Optionsâ€åˆ™æ¶µç›–äº†ç”¨æˆ·åœ¨é€‰æ‹©é¢˜ä¸­å¯èƒ½é‡åˆ°çš„å„ç§é€‰é¡¹ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£ç”¨æˆ·çš„é€‰æ‹©èŒƒå›´ã€‚æ­¤å¤–ï¼Œâ€œDrop downâ€ç±»åˆ«åˆ™é’ˆå¯¹é‚£äº›éœ€è¦ç”¨æˆ·ä»å¤šä¸ªé€‰é¡¹ä¸­é€‰æ‹©ä¸€ä¸ªçš„ç•Œé¢å…ƒç´ ï¼Œç¡®ä¿æ¨¡å‹èƒ½å¤Ÿå¤„ç†ä¸‹æ‹‰èœå•çš„æƒ…å†µã€‚

åœ¨é—®å·è°ƒæŸ¥ä¸­ï¼Œç”¨æˆ·ä½“éªŒè‡³å…³é‡è¦ï¼Œå› æ­¤â€œNext buttonâ€ç±»åˆ«çš„å­˜åœ¨å°¤ä¸ºé‡è¦ã€‚è¯¥ç±»åˆ«æ—¨åœ¨è¯†åˆ«ç”¨æˆ·åœ¨å®Œæˆå½“å‰é—®é¢˜åç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œçš„æŒ‰é’®ï¼Œç¡®ä¿æ¨¡å‹èƒ½å¤Ÿå‡†ç¡®æ•æ‰åˆ°ç”¨æˆ·çš„äº¤äº’è¡Œä¸ºã€‚åŒæ—¶ï¼Œâ€œRating Descriptionsâ€ç±»åˆ«æä¾›äº†ç”¨æˆ·è¯„åˆ†æ—¶æ‰€éœ€çš„æè¿°ä¿¡æ¯ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£è¯„åˆ†çš„ä¸Šä¸‹æ–‡ï¼Œä»è€Œæé«˜è¯„åˆ†ç³»ç»Ÿçš„å‡†ç¡®æ€§å’Œå¯é æ€§ã€‚

ä¸ºäº†å…¨é¢è¦†ç›–é—®å·è°ƒæŸ¥çš„ç»“æ„ï¼Œâ€œSub questionsâ€ç±»åˆ«è¢«å¼•å…¥ï¼Œä»¥è¯†åˆ«é‚£äº›åœ¨ä¸»é—®é¢˜ä¸‹å¯èƒ½å‡ºç°çš„é™„åŠ é—®é¢˜ã€‚è¿™ç§å±‚æ¬¡ç»“æ„çš„è®¾è®¡ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£é—®å·çš„é€»è¾‘å…³ç³»ï¼Œä»è€Œæå‡æ•´ä½“çš„æ£€æµ‹èƒ½åŠ›ã€‚è€Œâ€œText boxâ€ç±»åˆ«åˆ™å…è®¸ç”¨æˆ·è¾“å…¥è‡ªç”±æ–‡æœ¬ï¼Œæ¨¡å‹éœ€è¦èƒ½å¤Ÿè¯†åˆ«å¹¶å¤„ç†è¿™äº›æ–‡æœ¬æ¡†ï¼Œä»¥ä¾¿æ•æ‰ç”¨æˆ·çš„å¼€æ”¾å¼åé¦ˆã€‚

åœ¨æ•°æ®é›†çš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œæ•°æ®çš„å¤šæ ·æ€§å’Œæ ‡æ³¨çš„å‡†ç¡®æ€§æ˜¯å…³é”®å› ç´ ã€‚ä¸ºç¡®ä¿â€œsleepyâ€æ•°æ®é›†çš„æœ‰æ•ˆæ€§ï¼Œç ”ç©¶å›¢é˜Ÿè¿›è¡Œäº†å¤§é‡çš„é—®å·è°ƒæŸ¥æ ·æœ¬æ”¶é›†å’Œæ ‡æ³¨å·¥ä½œã€‚æ¯ä¸ªç±»åˆ«çš„æ ·æœ¬å‡ç»è¿‡ä¸¥æ ¼çš„å®¡æ ¸ï¼Œä»¥ç¡®ä¿å…¶ä»£è¡¨æ€§å’Œå‡†ç¡®æ€§ã€‚è¿™ä¸€è¿‡ç¨‹ä¸ä»…æé«˜äº†æ•°æ®é›†çš„è´¨é‡ï¼Œä¹Ÿä¸ºåç»­çš„æ¨¡å‹è®­ç»ƒæä¾›äº†åšå®çš„åŸºç¡€ã€‚

æ€»ä¹‹ï¼Œâ€œsleepyâ€æ•°æ®é›†çš„æ„å»ºä¸ºæ”¹è¿›YOLOv8çš„é—®å·è°ƒæŸ¥å…ƒç´ æ£€æµ‹ç³»ç»Ÿæä¾›äº†ä¸°å¯Œçš„èµ„æºã€‚é€šè¿‡å¯¹ä¸ƒä¸ªç±»åˆ«çš„ç²¾å¿ƒè®¾è®¡ä¸æ ‡æ³¨ï¼Œè¯¥æ•°æ®é›†ä¸ä»…æ¶µç›–äº†é—®å·è°ƒæŸ¥ä¸­å¸¸è§çš„å…ƒç´ ï¼Œè¿˜ä¸ºæ¨¡å‹çš„è®­ç»ƒä¸ä¼˜åŒ–æä¾›äº†å¤šæ ·åŒ–çš„æ ·æœ¬ã€‚è¿™å°†æœ‰åŠ©äºæå‡æ¨¡å‹åœ¨å®é™…åº”ç”¨ä¸­çš„è¡¨ç°ï¼Œä½¿å…¶èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£å’Œå¤„ç†å¤æ‚çš„é—®å·è°ƒæŸ¥ç•Œé¢ï¼Œä»è€Œä¸ºç”¨æˆ·æä¾›æ›´ä¸ºæµç•…å’Œé«˜æ•ˆçš„äº¤äº’ä½“éªŒã€‚

![4.png](4.png)

![5.png](5.png)

![6.png](6.png)

![7.png](7.png)

![8.png](8.png)

### 5.å…¨å¥—é¡¹ç›®ç¯å¢ƒéƒ¨ç½²è§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰

[5.1 ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404473917358506534?logTag=c807d0cbc21c0ef59de5)




[5.2 å®‰è£…Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œä¾èµ–åº“å®‰è£…è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404474678003106304?logTag=1f1041108cd1f708b01a)

### 6.æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰

[6.1 æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰](https://www.ixigua.com/7404477157818401292?logTag=d31a2dfd1983c9668658)

### 7.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰

[7.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰](https://www.ixigua.com/7404478314661806627?logTag=29066f8288e3f4eea3a4)

### 8.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£ï¼ˆéç§‘ç­ä¹Ÿå¯ä»¥è½»æ¾å†™åˆŠå‘åˆŠï¼ŒV10ç‰ˆæœ¬æ­£åœ¨ç§‘ç ”å¾…æ›´æ–°ï¼‰

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ¯ä¸ªåˆ›æ–°ç‚¹çš„å…·ä½“åŸç†è®²è§£å°±ä¸ä¸€ä¸€å±•å¼€ï¼Œå…·ä½“è§ä¸‹åˆ—ç½‘å€ä¸­çš„åˆ›æ–°ç‚¹å¯¹åº”å­é¡¹ç›®çš„æŠ€æœ¯åŸç†åšå®¢ç½‘å€ã€Blogã€‘ï¼š

![9.png](9.png)

[8.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£é“¾æ¥](https://gitee.com/qunmasj/good)

### 9.ç³»ç»ŸåŠŸèƒ½å±•ç¤ºï¼ˆæ£€æµ‹å¯¹è±¡ä¸ºä¸¾ä¾‹ï¼Œå®é™…å†…å®¹ä»¥æœ¬é¡¹ç›®æ•°æ®é›†ä¸ºå‡†ï¼‰

å›¾9.1.ç³»ç»Ÿæ”¯æŒæ£€æµ‹ç»“æœè¡¨æ ¼æ˜¾ç¤º

  å›¾9.2.ç³»ç»Ÿæ”¯æŒç½®ä¿¡åº¦å’ŒIOUé˜ˆå€¼æ‰‹åŠ¨è°ƒèŠ‚

  å›¾9.3.ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰åŠ è½½æƒé‡æ–‡ä»¶best.pt(éœ€è¦ä½ é€šè¿‡æ­¥éª¤5ä¸­è®­ç»ƒè·å¾—)

  å›¾9.4.ç³»ç»Ÿæ”¯æŒæ‘„åƒå¤´å®æ—¶è¯†åˆ«

  å›¾9.5.ç³»ç»Ÿæ”¯æŒå›¾ç‰‡è¯†åˆ«

  å›¾9.6.ç³»ç»Ÿæ”¯æŒè§†é¢‘è¯†åˆ«

  å›¾9.7.ç³»ç»Ÿæ”¯æŒè¯†åˆ«ç»“æœæ–‡ä»¶è‡ªåŠ¨ä¿å­˜

  å›¾9.8.ç³»ç»Ÿæ”¯æŒExcelå¯¼å‡ºæ£€æµ‹ç»“æœæ•°æ®

![10.png](10.png)

![11.png](11.png)

![12.png](12.png)

![13.png](13.png)

![14.png](14.png)

![15.png](15.png)

![16.png](16.png)

![17.png](17.png)

### 10.åŸå§‹YOLOV8ç®—æ³•åŸç†

åŸå§‹YOLOv8ç®—æ³•åŸç†

YOLOv8ç®—æ³•çš„æå‡ºæ ‡å¿—ç€ç›®æ ‡æ£€æµ‹é¢†åŸŸçš„ä¸€æ¬¡é‡è¦é£è·ƒã€‚ä½œä¸ºYOLOç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼ŒYOLOv8åœ¨2023å¹´1æœˆ10æ—¥æ­£å¼å‘å¸ƒï¼Œå…¶è®¾è®¡ç†å¿µä¸ä¹‹å‰çš„YOLOv3ã€YOLOv5ç­‰ç‰ˆæœ¬ç›¸æ‰¿ï¼Œä½†åœ¨å¤šä¸ªæ–¹é¢è¿›è¡Œäº†åˆ›æ–°å’Œæ”¹è¿›ï¼Œæ—¨åœ¨æå‡æ¨¡å‹çš„æ€§èƒ½å’Œå®ç”¨æ€§ã€‚YOLOv8çš„æ ¸å¿ƒç›®æ ‡æ˜¯å®ç°æ›´é«˜çš„æ£€æµ‹ç²¾åº¦å’Œæ›´å¿«çš„æ‰§è¡Œé€Ÿåº¦ï¼Œæˆä¸ºè®¡ç®—æœºè§†è§‰ä»»åŠ¡ä¸­çš„ä¸€é¡¹å…ˆè¿›å·¥å…·ã€‚

é¦–å…ˆï¼ŒYOLOv8åœ¨æ•°æ®é¢„å¤„ç†é˜¶æ®µå»¶ç»­äº†YOLOv5çš„ç­–ç•¥ï¼Œé‡‡ç”¨äº†å¤šç§æ•°æ®å¢å¼ºæŠ€æœ¯ã€‚è¿™äº›æŠ€æœ¯åŒ…æ‹¬é©¬èµ›å…‹å¢å¼ºã€æ··åˆå¢å¼ºã€ç©ºé—´æ‰°åŠ¨å’Œé¢œè‰²æ‰°åŠ¨ç­‰ï¼Œæ—¨åœ¨é€šè¿‡å¤šæ ·åŒ–çš„è®­ç»ƒæ ·æœ¬æ¥æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚é€šè¿‡è¿™äº›å¢å¼ºæ‰‹æ®µï¼ŒYOLOv8èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”ä¸åŒåœºæ™¯å’Œæ¡ä»¶ä¸‹çš„ç›®æ ‡æ£€æµ‹ä»»åŠ¡ï¼Œæå‡äº†æ¨¡å‹çš„é²æ£’æ€§ã€‚

åœ¨éª¨å¹²ç½‘ç»œç»“æ„æ–¹é¢ï¼ŒYOLOv8å¯¹YOLOv5çš„è®¾è®¡è¿›è¡Œäº†ä¼˜åŒ–ï¼Œé‡‡ç”¨äº†æ–°çš„C2fæ¨¡å—æ›¿ä»£äº†åŸæœ‰çš„C3æ¨¡å—ã€‚C2fæ¨¡å—é€šè¿‡å¼•å…¥æ›´å¤šçš„è·³å±‚è¿æ¥å’Œåˆ†æ”¯ç»“æ„ï¼Œä¸°å¯Œäº†æ¢¯åº¦å›ä¼ æ—¶çš„æ”¯æµï¼Œä»è€Œå¢å¼ºäº†ç‰¹å¾æå–çš„èƒ½åŠ›ã€‚è¿™ç§è®¾è®¡ä¸ä»…æé«˜äº†ç‰¹å¾çš„è¡¨è¾¾èƒ½åŠ›ï¼Œè¿˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡è½»äº†æ¨¡å‹çš„è®¡ç®—è´Ÿæ‹…ï¼Œä½¿å¾—YOLOv8åœ¨å¤„ç†é«˜åˆ†è¾¨ç‡å›¾åƒæ—¶è¡¨ç°å¾—æ›´åŠ é«˜æ•ˆã€‚

YOLOv8ç»§ç»­é‡‡ç”¨ç‰¹å¾é‡‘å­—å¡”ç½‘ç»œï¼ˆFPNï¼‰å’Œè·¯å¾„èšåˆç½‘ç»œï¼ˆPANï¼‰çš„ç»“æ„ï¼Œä»¥å®ç°å¤šå°ºåº¦ç‰¹å¾çš„èåˆã€‚è¿™ç§ç»“æ„èƒ½å¤Ÿæœ‰æ•ˆåœ°æ•´åˆæ¥è‡ªä¸åŒå±‚æ¬¡çš„ç‰¹å¾ä¿¡æ¯ï¼Œä½¿å¾—æ¨¡å‹åœ¨é¢å¯¹å°ç›®æ ‡å’Œå¤æ‚åœºæ™¯æ—¶ä¾ç„¶èƒ½å¤Ÿä¿æŒè‰¯å¥½çš„æ£€æµ‹æ€§èƒ½ã€‚é€šè¿‡å°†C3æ¨¡å—æ›¿æ¢ä¸ºC2fæ¨¡å—ï¼ŒYOLOv8åœ¨ç‰¹å¾èåˆçš„è¿‡ç¨‹ä¸­å®ç°äº†æ›´é«˜çš„çµæ´»æ€§å’Œæ•ˆç‡ï¼Œè¿›ä¸€æ­¥æå‡äº†æ¨¡å‹çš„æ•´ä½“æ€§èƒ½ã€‚

åœ¨æ£€æµ‹å¤´çš„è®¾è®¡ä¸Šï¼ŒYOLOv8å¼•å…¥äº†è§£è€¦å¤´ç»“æ„ï¼Œè¿™ä¸€ç»“æ„çš„æœ€å¤§ç‰¹ç‚¹æ˜¯å°†åˆ†ç±»å’Œå®šä½ä»»åŠ¡åˆ†å¼€å¤„ç†ã€‚ä¸ä¹‹å‰çš„è€¦åˆå¤´ä¸åŒï¼Œè§£è€¦å¤´é€šè¿‡ä¸¤æ¡å¹¶è¡Œçš„åˆ†æ”¯åˆ†åˆ«æå–ç±»åˆ«ç‰¹å¾å’Œä½ç½®ç‰¹å¾ï¼Œä½¿å¾—æ¨¡å‹åœ¨è¿›è¡Œç›®æ ‡æ£€æµ‹æ—¶èƒ½å¤Ÿæ›´åŠ ä¸“æ³¨äºå„è‡ªçš„ä»»åŠ¡ã€‚è¿™ç§è®¾è®¡ä¸ä»…æé«˜äº†æ£€æµ‹çš„å‡†ç¡®æ€§ï¼Œè¿˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šç®€åŒ–äº†æ¨¡å‹çš„å¤æ‚æ€§ï¼Œæå‡äº†å…¶å¯ç”¨æ€§ã€‚

æ ‡ç­¾åˆ†é…ç­–ç•¥æ˜¯YOLOv8çš„å¦ä¸€é¡¹é‡è¦åˆ›æ–°ã€‚YOLOv8é‡‡ç”¨äº†åŠ¨æ€æ ‡ç­¾åˆ†é…ç­–ç•¥ï¼Œé¿å…äº†ä¾èµ–äºæ•°æ®é›†çš„å€™é€‰æ¡†èšç±»æ–¹æ³•ã€‚è¿™ä¸€ç­–ç•¥é€šè¿‡å¯¹æ­£è´Ÿæ ·æœ¬è¿›è¡Œå¤šå°ºåº¦åˆ†é…ï¼Œç¡®ä¿äº†æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”æ•°æ®çš„åˆ†å¸ƒç‰¹å¾ã€‚ä¸YOLOXä½¿ç”¨çš„SimOTAç­–ç•¥ä¸åŒï¼ŒYOLOv8å€Ÿé‰´äº†YOLOv6çš„TOODç­–ç•¥ï¼Œä½¿å¾—æ ‡ç­¾åˆ†é…æ›´åŠ çµæ´»å’Œé«˜æ•ˆã€‚

åœ¨æŸå¤±å‡½æ•°çš„è®¾è®¡ä¸Šï¼ŒYOLOv8å¼•å…¥äº†Varifocal Losså’ŒCIoU Lossç­‰æ–°å‹æŸå¤±å‡½æ•°ã€‚Varifocal Lossé€šè¿‡ä¸å¯¹ç§°å‚æ•°å¯¹æ­£è´Ÿæ ·æœ¬è¿›è¡ŒåŠ æƒï¼Œå¼ºè°ƒäº†é«˜è´¨é‡æ­£æ ·æœ¬å¯¹æ¨¡å‹è®­ç»ƒçš„é‡è¦æ€§ã€‚è¿™ç§åŠ æƒæœºåˆ¶ä½¿å¾—æ¨¡å‹åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­èƒ½å¤Ÿæ›´åŠ å…³æ³¨äºé‚£äº›éš¾ä»¥æ£€æµ‹çš„ç›®æ ‡ï¼Œä»è€Œæå‡äº†æ•´ä½“çš„æ£€æµ‹æ€§èƒ½ã€‚CIoU Lossåˆ™åœ¨ä½ç½®å›å½’ä¸­å¼•å…¥äº†æ›´ä¸ºå…¨é¢çš„è€ƒé‡ï¼Œä½¿å¾—æ¨¡å‹åœ¨é¢„æµ‹ç›®æ ‡ä½ç½®æ—¶æ›´åŠ å‡†ç¡®ã€‚

YOLOv8çš„åˆ›æ–°ä¸ä»…ä½“ç°åœ¨æ¨¡å‹ç»“æ„å’ŒæŸå¤±å‡½æ•°çš„è®¾è®¡ä¸Šï¼Œè¿˜åœ¨äºå…¶å¹¿æ³›çš„é€‚ç”¨æ€§ã€‚æ— è®ºæ˜¯åœ¨CPUè¿˜æ˜¯GPUç­‰å„ç§ç¡¬ä»¶å¹³å°ä¸Šï¼ŒYOLOv8éƒ½èƒ½å¤Ÿé«˜æ•ˆè¿è¡Œï¼Œé€‚åº”ä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚è¿™ç§çµæ´»æ€§ä½¿å¾—YOLOv8æˆä¸ºäº†ä¸€ä¸ªç†æƒ³çš„é€‰æ‹©ï¼Œå°¤å…¶æ˜¯åœ¨å®æ—¶ç›®æ ‡æ£€æµ‹å’Œå®ä¾‹åˆ†å‰²ç­‰ä»»åŠ¡ä¸­ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒYOLOv8é€šè¿‡å¯¹æ•°æ®é¢„å¤„ç†ã€éª¨å¹²ç½‘ç»œã€ç‰¹å¾èåˆã€æ£€æµ‹å¤´ã€æ ‡ç­¾åˆ†é…ç­–ç•¥å’ŒæŸå¤±å‡½æ•°ç­‰å¤šä¸ªæ–¹é¢çš„åˆ›æ–°ï¼Œæ˜¾è‘—æå‡äº†ç›®æ ‡æ£€æµ‹çš„æ€§èƒ½ã€‚å…¶åœ¨ç²¾åº¦å’Œæ‰§è¡Œæ—¶é—´ä¸Šçš„ä¼˜åŠ¿ï¼Œä½¿å¾—YOLOv8æˆä¸ºäº†è®¡ç®—æœºè§†è§‰é¢†åŸŸä¸­æœ€å…ˆè¿›çš„æ¨¡å‹ä¹‹ä¸€ï¼Œèƒ½å¤Ÿæ»¡è¶³å¤šç§å®é™…åº”ç”¨çš„éœ€æ±‚ã€‚éšç€YOLOv8çš„å¹¿æ³›åº”ç”¨ï¼Œæœªæ¥çš„ç›®æ ‡æ£€æµ‹ä»»åŠ¡å°†ä¼šè¿æ¥æ›´é«˜çš„å‡†ç¡®æ€§å’Œæ›´å¿«çš„å“åº”é€Ÿåº¦ï¼Œä¸ºå„ç±»æ™ºèƒ½åº”ç”¨æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒã€‚

![18.png](18.png)

### 11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰

#### 11.1 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\yolo\segment\train.py

ä»¥ä¸‹æ˜¯å¯¹ç»™å®šä»£ç çš„æ ¸å¿ƒéƒ¨åˆ†è¿›è¡Œåˆ†æå’Œè¯¦ç»†æ³¨é‡Šçš„ç»“æœï¼š

```python
# Ultralytics YOLO ğŸš€, AGPL-3.0 license

from copy import copy  # å¯¼å…¥copyæ¨¡å—ï¼Œç”¨äºå¤åˆ¶å¯¹è±¡

from ultralytics.models import yolo  # å¯¼å…¥YOLOæ¨¡å‹æ¨¡å—
from ultralytics.nn.tasks import SegmentationModel  # å¯¼å…¥åˆ†å‰²æ¨¡å‹
from ultralytics.utils import DEFAULT_CFG, RANK  # å¯¼å…¥é»˜è®¤é…ç½®å’Œæ’å
from ultralytics.utils.plotting import plot_images, plot_results  # å¯¼å…¥ç»˜å›¾å·¥å…·

class SegmentationTrainer(yolo.detect.DetectionTrainer):
    """
    SegmentationTrainerç±»æ‰©å±•äº†DetectionTrainerç±»ï¼Œç”¨äºåŸºäºåˆ†å‰²æ¨¡å‹çš„è®­ç»ƒã€‚

    ç¤ºä¾‹:
        ```python
        from ultralytics.models.yolo.segment import SegmentationTrainer

        args = dict(model='yolov8n-seg.pt', data='coco8-seg.yaml', epochs=3)
        trainer = SegmentationTrainer(overrides=args)
        trainer.train()
        ```
    """

    def __init__(self, cfg=DEFAULT_CFG, overrides=None, _callbacks=None):
        """åˆå§‹åŒ–SegmentationTrainerå¯¹è±¡ï¼Œä½¿ç”¨ç»™å®šçš„å‚æ•°ã€‚"""
        if overrides is None:
            overrides = {}  # å¦‚æœæ²¡æœ‰æä¾›è¦†ç›–å‚æ•°ï¼Œåˆ™åˆå§‹åŒ–ä¸ºç©ºå­—å…¸
        overrides['task'] = 'segment'  # è®¾ç½®ä»»åŠ¡ç±»å‹ä¸ºåˆ†å‰²
        super().__init__(cfg, overrides, _callbacks)  # è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å›æ ¹æ®æŒ‡å®šé…ç½®å’Œæƒé‡åˆå§‹åŒ–çš„SegmentationModelã€‚"""
        # åˆ›å»ºåˆ†å‰²æ¨¡å‹å®ä¾‹ï¼Œè¾“å…¥é€šé“æ•°ä¸º3ï¼Œç±»åˆ«æ•°ä¸ºæ•°æ®é›†ä¸­ç±»åˆ«æ•°
        model = SegmentationModel(cfg, ch=3, nc=self.data['nc'], verbose=verbose and RANK == -1)
        if weights:
            model.load(weights)  # å¦‚æœæä¾›äº†æƒé‡ï¼Œåˆ™åŠ è½½æƒé‡

        return model  # è¿”å›æ¨¡å‹å®ä¾‹

    def get_validator(self):
        """è¿”å›SegmentationValidatorå®ä¾‹ï¼Œç”¨äºYOLOæ¨¡å‹çš„éªŒè¯ã€‚"""
        self.loss_names = 'box_loss', 'seg_loss', 'cls_loss', 'dfl_loss'  # å®šä¹‰æŸå¤±åç§°
        # åˆ›å»ºå¹¶è¿”å›SegmentationValidatorå®ä¾‹
        return yolo.segment.SegmentationValidator(self.test_loader, save_dir=self.save_dir, args=copy(self.args))

    def plot_training_samples(self, batch, ni):
        """åˆ›å»ºè®­ç»ƒæ ·æœ¬å›¾åƒçš„ç»˜å›¾ï¼ŒåŒ…å«æ ‡ç­¾å’Œè¾¹æ¡†åæ ‡ã€‚"""
        # ä½¿ç”¨plot_imageså‡½æ•°ç»˜åˆ¶è®­ç»ƒæ ·æœ¬å›¾åƒ
        plot_images(batch['img'],
                    batch['batch_idx'],
                    batch['cls'].squeeze(-1),
                    batch['bboxes'],
                    batch['masks'],
                    paths=batch['im_file'],
                    fname=self.save_dir / f'train_batch{ni}.jpg',  # ä¿å­˜å›¾åƒçš„æ–‡ä»¶å
                    on_plot=self.on_plot)  # ç»˜å›¾æ—¶çš„å›è°ƒå‡½æ•°

    def plot_metrics(self):
        """ç»˜åˆ¶è®­ç»ƒ/éªŒè¯æŒ‡æ ‡ã€‚"""
        # ä½¿ç”¨plot_resultså‡½æ•°ç»˜åˆ¶è®­ç»ƒå’ŒéªŒè¯çš„ç»“æœ
        plot_results(file=self.csv, segment=True, on_plot=self.on_plot)  # ä¿å­˜ç»“æœä¸ºresults.png
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†åˆ†æï¼š
1. **ç±»å®šä¹‰**ï¼š`SegmentationTrainer`ç±»ç»§æ‰¿è‡ª`DetectionTrainer`ï¼Œä¸“é—¨ç”¨äºå¤„ç†åˆ†å‰²ä»»åŠ¡çš„è®­ç»ƒã€‚
2. **åˆå§‹åŒ–æ–¹æ³•**ï¼šåœ¨æ„é€ å‡½æ•°ä¸­è®¾ç½®ä»»åŠ¡ç±»å‹ä¸ºåˆ†å‰²ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚
3. **æ¨¡å‹è·å–**ï¼š`get_model`æ–¹æ³•åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªåˆ†å‰²æ¨¡å‹å®ä¾‹ï¼Œæ”¯æŒåŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
4. **éªŒè¯å™¨è·å–**ï¼š`get_validator`æ–¹æ³•è¿”å›ä¸€ä¸ªç”¨äºéªŒè¯çš„åˆ†å‰²éªŒè¯å™¨å®ä¾‹ï¼Œå¹¶å®šä¹‰äº†æŸå¤±åç§°ã€‚
5. **ç»˜å›¾æ–¹æ³•**ï¼š`plot_training_samples`å’Œ`plot_metrics`æ–¹æ³•ç”¨äºå¯è§†åŒ–è®­ç»ƒæ ·æœ¬å’Œè®­ç»ƒæŒ‡æ ‡ï¼Œä¾¿äºåˆ†ææ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚

é€šè¿‡è¿™äº›æ ¸å¿ƒéƒ¨åˆ†ï¼Œç”¨æˆ·å¯ä»¥ç†è§£å¦‚ä½•ä½¿ç”¨`SegmentationTrainer`ç±»è¿›è¡Œåˆ†å‰²æ¨¡å‹çš„è®­ç»ƒå’ŒéªŒè¯ã€‚

è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºYOLOv8æ¨¡å‹çš„åˆ†å‰²è®­ç»ƒçš„Pythonè„šæœ¬ï¼Œä¸»è¦å®šä¹‰äº†ä¸€ä¸ªåä¸º`SegmentationTrainer`çš„ç±»ï¼Œè¯¥ç±»ç»§æ‰¿è‡ª`DetectionTrainer`ï¼Œå¹¶æ‰©å±•äº†ç”¨äºå›¾åƒåˆ†å‰²ä»»åŠ¡çš„åŠŸèƒ½ã€‚

åœ¨æ–‡ä»¶çš„å¼€å¤´ï¼Œå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„æ¨¡å—å’Œç±»ï¼ŒåŒ…æ‹¬YOLOæ¨¡å‹ã€åˆ†å‰²æ¨¡å‹ã€é»˜è®¤é…ç½®ã€ä»¥åŠç”¨äºç»˜å›¾çš„å·¥å…·ã€‚æ¥ç€ï¼Œå®šä¹‰äº†`SegmentationTrainer`ç±»ï¼Œè¯¥ç±»çš„ä¸»è¦åŠŸèƒ½æ˜¯ä¸ºå›¾åƒåˆ†å‰²ä»»åŠ¡æä¾›è®­ç»ƒæ”¯æŒã€‚

åœ¨ç±»çš„æ„é€ å‡½æ•°`__init__`ä¸­ï¼Œé¦–å…ˆæ£€æŸ¥æ˜¯å¦æä¾›äº†`overrides`å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åˆå§‹åŒ–ä¸ºç©ºå­—å…¸ã€‚ç„¶åï¼Œå°†ä»»åŠ¡ç±»å‹è®¾ç½®ä¸ºâ€œsegmentâ€ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚

`get_model`æ–¹æ³•ç”¨äºè¿”å›ä¸€ä¸ªåˆå§‹åŒ–çš„åˆ†å‰²æ¨¡å‹å®ä¾‹ã€‚è¯¥æ–¹æ³•æ¥å—é…ç½®å’Œæƒé‡å‚æ•°ï¼Œå¦‚æœæä¾›äº†æƒé‡ï¼Œåˆ™ä¼šåŠ è½½è¿™äº›æƒé‡ã€‚è¿™ä¸ªæ–¹æ³•ç¡®ä¿æ¨¡å‹çš„é€šé“æ•°å’Œç±»åˆ«æ•°ä¸æ•°æ®é›†ç›¸åŒ¹é…ã€‚

`get_validator`æ–¹æ³•è¿”å›ä¸€ä¸ªç”¨äºéªŒè¯YOLOæ¨¡å‹çš„éªŒè¯å™¨å®ä¾‹ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå®šä¹‰äº†æŸå¤±åç§°ï¼ŒåŒ…æ‹¬æ¡†æŸå¤±ã€åˆ†å‰²æŸå¤±ã€åˆ†ç±»æŸå¤±å’Œåˆ†å¸ƒå¼ç„¦ç‚¹æŸå¤±ã€‚éªŒè¯å™¨å°†ç”¨äºè¯„ä¼°æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„è¡¨ç°ã€‚

`plot_training_samples`æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒæ ·æœ¬çš„å›¾åƒï¼ŒåŒ…æ‹¬æ ‡ç­¾å’Œè¾¹æ¡†åæ ‡ã€‚è¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ‰¹æ¬¡çš„å›¾åƒæ•°æ®ï¼Œå¹¶å°†å…¶ç»˜åˆ¶æˆå›¾åƒæ–‡ä»¶ï¼Œæ–¹ä¾¿è§‚å¯Ÿè®­ç»ƒè¿‡ç¨‹ä¸­çš„æ ·æœ¬æƒ…å†µã€‚

æœ€åï¼Œ`plot_metrics`æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒå’ŒéªŒè¯è¿‡ç¨‹ä¸­çš„æŒ‡æ ‡ã€‚è¿™ä¸€æ–¹æ³•è°ƒç”¨äº†`plot_results`å‡½æ•°ï¼Œå°†è®­ç»ƒè¿‡ç¨‹ä¸­çš„ç»“æœä¿å­˜ä¸ºå›¾åƒæ–‡ä»¶ï¼Œä¾¿äºåç»­åˆ†æã€‚

æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶ï¼Œç”¨äºè®­ç»ƒYOLOv8æ¨¡å‹è¿›è¡Œå›¾åƒåˆ†å‰²ä»»åŠ¡ï¼ŒåŒ…å«äº†æ¨¡å‹åˆå§‹åŒ–ã€éªŒè¯ã€è®­ç»ƒæ ·æœ¬å¯è§†åŒ–ä»¥åŠè®­ç»ƒè¿‡ç¨‹æŒ‡æ ‡çš„ç»˜åˆ¶ç­‰åŠŸèƒ½ã€‚

#### 11.2 ui.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å¹¶æ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import sys
import subprocess

def run_script(script_path):
    """
    ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

    Args:
        script_path (str): è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„

    Returns:
        None
    """
    # è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„
    python_path = sys.executable

    # æ„å»ºè¿è¡Œå‘½ä»¤ï¼Œä½¿ç”¨ streamlit è¿è¡ŒæŒ‡å®šçš„è„šæœ¬
    command = f'"{python_path}" -m streamlit run "{script_path}"'

    # æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶ç­‰å¾…å…¶å®Œæˆ
    result = subprocess.run(command, shell=True)
    
    # æ£€æŸ¥å‘½ä»¤æ‰§è¡Œç»“æœï¼Œå¦‚æœè¿”å›ç ä¸ä¸º0ï¼Œè¡¨ç¤ºå‡ºé”™
    if result.returncode != 0:
        print("è„šæœ¬è¿è¡Œå‡ºé”™ã€‚")

# ç¨‹åºå…¥å£
if __name__ == "__main__":
    # æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„
    script_path = "web.py"  # è¿™é‡Œå¯ä»¥ç›´æ¥æŒ‡å®šè„šæœ¬å

    # è°ƒç”¨å‡½æ•°è¿è¡Œè„šæœ¬
    run_script(script_path)
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `sys`ï¼šç”¨äºè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ã€‚
   - `subprocess`ï¼šç”¨äºæ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚

2. **`run_script` å‡½æ•°**ï¼š
   - æ¥æ”¶ä¸€ä¸ªå‚æ•° `script_path`ï¼Œè¡¨ç¤ºè¦è¿è¡Œçš„ Python è„šæœ¬çš„è·¯å¾„ã€‚
   - ä½¿ç”¨ `sys.executable` è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œä»¥ç¡®ä¿ä½¿ç”¨ç›¸åŒçš„ç¯å¢ƒæ¥è¿è¡Œè„šæœ¬ã€‚
   - æ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ `streamlit` æ¨¡å—æ¥è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚
   - ä½¿ç”¨ `subprocess.run` æ‰§è¡Œæ„å»ºçš„å‘½ä»¤ï¼Œå¹¶ç­‰å¾…å…¶å®Œæˆã€‚
   - æ£€æŸ¥å‘½ä»¤çš„è¿”å›ç ï¼Œå¦‚æœä¸ä¸º0ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°äº†é”™è¯¯ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯ã€‚

3. **ç¨‹åºå…¥å£**ï¼š
   - åœ¨ `if __name__ == "__main__":` å—ä¸­ï¼ŒæŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬åç§°ï¼ˆ`web.py`ï¼‰ã€‚
   - è°ƒç”¨ `run_script` å‡½æ•°ï¼Œå¼€å§‹æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶åä¸º `ui.py`ï¼Œä¸»è¦åŠŸèƒ½æ˜¯ä½¿ç”¨å½“å‰çš„ Python ç¯å¢ƒæ¥è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„è„šæœ¬ã€‚ç¨‹åºçš„æ ¸å¿ƒéƒ¨åˆ†æ˜¯ä¸€ä¸ªåä¸º `run_script` çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•° `script_path`ï¼Œè¡¨ç¤ºè¦è¿è¡Œçš„è„šæœ¬çš„è·¯å¾„ã€‚

åœ¨ `run_script` å‡½æ•°ä¸­ï¼Œé¦–å…ˆé€šè¿‡ `sys.executable` è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ã€‚æ¥ç€ï¼Œæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ `streamlit` æ¨¡å—æ¥è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚å‘½ä»¤çš„æ ¼å¼æ˜¯ `"{python_path}" -m streamlit run "{script_path}"`ï¼Œå…¶ä¸­ `{python_path}` å’Œ `{script_path}` ä¼šè¢«å®é™…çš„è·¯å¾„æ›¿æ¢ã€‚

ç„¶åï¼Œä½¿ç”¨ `subprocess.run` æ–¹æ³•æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ä¸€ä¸ªæ–°çš„å­è¿›ç¨‹ä¸­è¿è¡Œå‘½ä»¤ï¼Œå¹¶ç­‰å¾…å…¶å®Œæˆã€‚å¦‚æœå‘½ä»¤æ‰§è¡Œåè¿”å›çš„çŠ¶æ€ç ä¸ä¸º 0ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œå‡ºé”™ï¼Œç¨‹åºä¼šæ‰“å°å‡ºâ€œè„šæœ¬è¿è¡Œå‡ºé”™ã€‚â€çš„æç¤ºä¿¡æ¯ã€‚

åœ¨æ–‡ä»¶çš„æœ€åéƒ¨åˆ†ï¼Œä½¿ç”¨ `if __name__ == "__main__":` æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ç›´æ¥è¿è¡Œè¯¥è„šæœ¬ã€‚å¦‚æœæ˜¯ï¼Œåˆ™ä¼šè°ƒç”¨ `abs_path` å‡½æ•°æ¥è·å– `web.py` è„šæœ¬çš„ç»å¯¹è·¯å¾„ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ `run_script` å‡½æ•°ï¼Œä»è€Œå¯åŠ¨è¿™ä¸ªè„šæœ¬ã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªç¨‹åºçš„ç›®çš„æ˜¯ä¸ºæ–¹ä¾¿åœ°åœ¨å½“å‰ Python ç¯å¢ƒä¸­è¿è¡Œä¸€ä¸ªåä¸º `web.py` çš„è„šæœ¬ï¼Œåˆ©ç”¨ `streamlit` æ¡†æ¶æ¥è¿›è¡Œ web åº”ç”¨çš„å¼€å‘å’Œå±•ç¤ºã€‚

#### 11.3 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\extra_modules\kernel_warehouse.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å¹¶æ·»åŠ è¯¦ç»†ä¸­æ–‡æ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import torch
import torch.nn as nn
import torch.nn.functional as F

class Attention(nn.Module):
    def __init__(self, in_planes, reduction, num_static_cell, num_local_mixture, norm_layer=nn.BatchNorm1d):
        """
        åˆå§‹åŒ–æ³¨æ„åŠ›æ¨¡å—
        å‚æ•°:
            in_planes: è¾“å…¥é€šé“æ•°
            reduction: éšè—å±‚çš„ç¼©å‡æ¯”ä¾‹
            num_static_cell: é™æ€å•å…ƒçš„æ•°é‡
            num_local_mixture: å±€éƒ¨æ··åˆçš„æ•°é‡
            norm_layer: å½’ä¸€åŒ–å±‚
        """
        super(Attention, self).__init__()
        hidden_planes = max(int(in_planes * reduction), 16)  # è®¡ç®—éšè—å±‚é€šé“æ•°
        self.kw_planes_per_mixture = num_static_cell + 1  # æ¯ä¸ªæ··åˆçš„å…³é”®ç‚¹é€šé“æ•°
        self.num_local_mixture = num_local_mixture  # å±€éƒ¨æ··åˆæ•°é‡
        self.kw_planes = self.kw_planes_per_mixture * num_local_mixture  # æ€»å…³é”®ç‚¹é€šé“æ•°

        # å®šä¹‰å±‚
        self.avgpool = nn.AdaptiveAvgPool1d(1)  # è‡ªé€‚åº”å¹³å‡æ± åŒ–
        self.fc1 = nn.Linear(in_planes, hidden_planes)  # å…¨è¿æ¥å±‚1
        self.norm1 = norm_layer(hidden_planes)  # å½’ä¸€åŒ–å±‚1
        self.act1 = nn.ReLU(inplace=True)  # æ¿€æ´»å‡½æ•°

        # ç¬¬äºŒå±‚çš„å®šä¹‰
        self.fc2 = nn.Linear(hidden_planes, self.kw_planes)  # å…¨è¿æ¥å±‚2

        self.temp_bias = torch.zeros([self.kw_planes], requires_grad=False)  # æ¸©åº¦åç½®
        self.temp_value = 0  # æ¸©åº¦å€¼åˆå§‹åŒ–
        self._initialize_weights()  # åˆå§‹åŒ–æƒé‡

    def _initialize_weights(self):
        """åˆå§‹åŒ–ç½‘ç»œæƒé‡"""
        for m in self.modules():
            if isinstance(m, nn.Linear):
                nn.init.kaiming_normal_(m.weight, mode='fan_out', nonlinearity='relu')  # Kaimingåˆå§‹åŒ–
                if m.bias is not None:
                    nn.init.constant_(m.bias, 0)  # åç½®åˆå§‹åŒ–ä¸º0
            if isinstance(m, nn.BatchNorm1d):
                nn.init.constant_(m.weight, 1)  # å½’ä¸€åŒ–å±‚æƒé‡åˆå§‹åŒ–ä¸º1
                nn.init.constant_(m.bias, 0)  # åç½®åˆå§‹åŒ–ä¸º0

    def forward(self, x):
        """å‰å‘ä¼ æ’­"""
        x = self.avgpool(x.reshape(*x.shape[:2], -1)).squeeze(dim=-1)  # æ± åŒ–æ“ä½œ
        x = self.act1(self.norm1(self.fc1(x)))  # ç»è¿‡å…¨è¿æ¥å±‚å’Œæ¿€æ´»å‡½æ•°
        x = self.fc2(x)  # ç»è¿‡ç¬¬äºŒä¸ªå…¨è¿æ¥å±‚
        x = x / (torch.sum(torch.abs(x), dim=1).view(-1, 1) + 1e-3)  # å½’ä¸€åŒ–
        x = (1.0 - self.temp_value) * x + self.temp_value * self.temp_bias.to(x.device).view(1, -1)  # æ¸©åº¦è°ƒæ•´
        return x  # è¿”å›ç»“æœ

class KWConvNd(nn.Module):
    def __init__(self, in_planes, out_planes, kernel_size, stride=1, padding=0, dilation=1, groups=1, bias=False):
        """
        åˆå§‹åŒ–å¤šç»´å·ç§¯å±‚
        å‚æ•°:
            in_planes: è¾“å…¥é€šé“æ•°
            out_planes: è¾“å‡ºé€šé“æ•°
            kernel_size: å·ç§¯æ ¸å¤§å°
            stride: æ­¥å¹…
            padding: å¡«å……
            dilation: è†¨èƒ€
            groups: åˆ†ç»„å·ç§¯
            bias: æ˜¯å¦ä½¿ç”¨åç½®
        """
        super(KWConvNd, self).__init__()
        self.in_planes = in_planes
        self.out_planes = out_planes
        self.kernel_size = kernel_size  # å·ç§¯æ ¸å¤§å°
        self.stride = stride  # æ­¥å¹…
        self.padding = padding  # å¡«å……
        self.dilation = dilation  # è†¨èƒ€
        self.groups = groups  # åˆ†ç»„å·ç§¯
        self.bias = nn.Parameter(torch.zeros([self.out_planes]), requires_grad=True) if bias else None  # åç½®å‚æ•°

    def forward(self, x):
        """å‰å‘ä¼ æ’­"""
        # è¿™é‡Œçœç•¥äº†å…·ä½“çš„å·ç§¯æ“ä½œï¼Œå‡è®¾ä½¿ç”¨æŸç§å·ç§¯æ–¹æ³•è¿›è¡Œè®¡ç®—
        return x  # è¿”å›ç»“æœ

# å…¶ä»–å·ç§¯ç±»ï¼ˆKWConv1d, KWConv2d, KWConv3dï¼‰çœç•¥ï¼Œç±»ä¼¼äºKWConvNdçš„å®ç°

class Warehouse_Manager(nn.Module):
    def __init__(self, reduction=0.0625):
        """
        åˆå§‹åŒ–ä»“åº“ç®¡ç†å™¨
        å‚æ•°:
            reduction: éšè—å±‚çš„ç¼©å‡æ¯”ä¾‹
        """
        super(Warehouse_Manager, self).__init__()
        self.reduction = reduction  # å­˜å‚¨ç¼©å‡æ¯”ä¾‹
        self.warehouse_list = {}  # ä»“åº“åˆ—è¡¨

    def reserve(self, in_planes, out_planes, kernel_size=1, stride=1, padding=0, dilation=1, groups=1, bias=True):
        """
        åˆ›å»ºä¸€ä¸ªåŠ¨æ€å·ç§¯å±‚å¹¶è®°å½•å…¶ä¿¡æ¯
        å‚æ•°:
            in_planes: è¾“å…¥é€šé“æ•°
            out_planes: è¾“å‡ºé€šé“æ•°
            kernel_size: å·ç§¯æ ¸å¤§å°
            stride: æ­¥å¹…
            padding: å¡«å……
            dilation: è†¨èƒ€
            groups: åˆ†ç»„å·ç§¯
            bias: æ˜¯å¦ä½¿ç”¨åç½®
        """
        # è¿™é‡Œçœç•¥äº†å…·ä½“çš„é€»è¾‘ï¼Œå‡è®¾åˆ›å»ºäº†ä¸€ä¸ªå·ç§¯å±‚å¹¶è®°å½•
        return None  # è¿”å›åˆ›å»ºçš„å±‚

    def store(self):
        """å­˜å‚¨ä»“åº“ä¿¡æ¯"""
        # è¿™é‡Œçœç•¥äº†å…·ä½“çš„é€»è¾‘ï¼Œå‡è®¾å­˜å‚¨äº†ä»“åº“ä¿¡æ¯
        pass  # å…·ä½“å®ç°

# å…¶ä»–ç±»å’Œå‡½æ•°çœç•¥ï¼Œä¿æŒä»£ç ç®€æ´
```

ä»¥ä¸Šä»£ç æ˜¯å¯¹åŸå§‹ä»£ç çš„æ ¸å¿ƒéƒ¨åˆ†è¿›è¡Œäº†æç‚¼ï¼Œå¹¶æ·»åŠ äº†è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼Œä»¥ä¾¿äºç†è§£æ¯ä¸ªéƒ¨åˆ†çš„åŠŸèƒ½å’Œä½œç”¨ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯YOLOv8ç®—æ³•ä¸­ä¸€ä¸ªé‡è¦çš„æ¨¡å—ï¼Œä¸»è¦å®ç°äº†ä¸€ä¸ªå†…æ ¸ä»“åº“ç®¡ç†å™¨å’Œç›¸å…³çš„å·ç§¯æ“ä½œã€‚å®ƒåŒ…å«äº†ä¸€äº›è‡ªå®šä¹‰çš„å·ç§¯å±‚å’Œæ³¨æ„åŠ›æœºåˆ¶ï¼Œæ—¨åœ¨æé«˜å·ç§¯ç¥ç»ç½‘ç»œçš„æ€§èƒ½å’Œçµæ´»æ€§ã€‚

é¦–å…ˆï¼Œæ–‡ä»¶å¯¼å…¥äº†å¿…è¦çš„PyTorchåº“ï¼ŒåŒ…æ‹¬å¼ é‡æ“ä½œã€ç¥ç»ç½‘ç»œæ¨¡å—ã€æ¿€æ´»å‡½æ•°ç­‰ã€‚ç„¶åå®šä¹‰äº†ä¸€ä¸ª`parse`å‡½æ•°ï¼Œç”¨äºå¤„ç†è¾“å…¥å‚æ•°ï¼Œç¡®ä¿å®ƒä»¬çš„æ ¼å¼ç¬¦åˆé¢„æœŸã€‚

æ¥ä¸‹æ¥ï¼Œå®šä¹‰äº†ä¸€ä¸ª`Attention`ç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ªç¥ç»ç½‘ç»œæ¨¡å—ï¼Œè´Ÿè´£è®¡ç®—æ³¨æ„åŠ›æƒé‡ã€‚è¿™ä¸ªç±»çš„æ„é€ å‡½æ•°æ¥å—å¤šä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬è¾“å…¥é€šé“æ•°ã€ç¼©å‡æ¯”ä¾‹ã€é™æ€å•å…ƒæ•°é‡ç­‰ã€‚å®ƒé€šè¿‡çº¿æ€§å±‚å’Œå½’ä¸€åŒ–å±‚æ„å»ºäº†ä¸€ä¸ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œå¹¶å®ç°äº†æƒé‡çš„åˆå§‹åŒ–å’Œæ¸©åº¦æ›´æ–°çš„åŠŸèƒ½ã€‚æ¸©åº¦å‚æ•°ç”¨äºæ§åˆ¶æ³¨æ„åŠ›çš„åˆ†é…ï¼Œèƒ½å¤Ÿæ ¹æ®ä¸åŒçš„è®­ç»ƒé˜¶æ®µè¿›è¡Œè°ƒæ•´ã€‚

`KWconvNd`ç±»æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„å·ç§¯å±‚ï¼Œå®ƒçš„æ„é€ å‡½æ•°æ¥å—è¾“å…¥å’Œè¾“å‡ºé€šé“æ•°ã€å·ç§¯æ ¸å¤§å°ã€æ­¥å¹…ã€å¡«å……ç­‰å‚æ•°ï¼Œå¹¶æ ¹æ®è¿™äº›å‚æ•°åˆå§‹åŒ–ç›¸åº”çš„å·ç§¯æ“ä½œã€‚å®ƒè¿˜åŒ…å«ä¸€ä¸ª`init_attention`æ–¹æ³•ï¼Œç”¨äºåˆå§‹åŒ–æ³¨æ„åŠ›æœºåˆ¶ï¼Œå¹¶åœ¨å‰å‘ä¼ æ’­ä¸­è®¡ç®—å·ç§¯è¾“å‡ºã€‚

æ¥ä¸‹æ¥çš„`KWConv1d`ã€`KWConv2d`å’Œ`KWConv3d`ç±»åˆ†åˆ«æ˜¯é’ˆå¯¹ä¸€ç»´ã€äºŒç»´å’Œä¸‰ç»´å·ç§¯çš„å…·ä½“å®ç°ï¼Œç»§æ‰¿è‡ª`KWconvNd`ç±»ï¼Œè®¾ç½®äº†ç›¸åº”çš„ç»´åº¦å’Œå·ç§¯å‡½æ•°ã€‚

`KWLinear`ç±»åˆ™æ˜¯ä¸€ä¸ªçº¿æ€§å±‚çš„å®ç°ï¼Œä½¿ç”¨äº†ä¸€ç»´å·ç§¯æ¥å®ç°çº¿æ€§å˜æ¢ã€‚

`Warehouse_Manager`ç±»æ˜¯ä¸€ä¸ªå†…æ ¸ä»“åº“ç®¡ç†å™¨ï¼Œè´Ÿè´£ç®¡ç†å’Œåˆ†é…å·ç§¯å±‚çš„æƒé‡ã€‚å®ƒçš„æ„é€ å‡½æ•°æ¥å—å¤šä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬ç¼©å‡æ¯”ä¾‹ã€å•å…ƒæ•°é‡æ¯”ä¾‹ã€å…±äº«èŒƒå›´ç­‰ã€‚è¯¥ç±»æä¾›äº†`reserve`æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºåŠ¨æ€å·ç§¯å±‚å¹¶è®°å½•å…¶ä¿¡æ¯ï¼Œä»¥åŠ`store`å’Œ`allocate`æ–¹æ³•ï¼Œç”¨äºå­˜å‚¨å’Œåˆ†é…æƒé‡ã€‚

æœ€åï¼Œ`KWConv`ç±»æ˜¯ä¸€ä¸ªåŒ…è£…ç±»ï¼Œç»“åˆäº†å·ç§¯æ“ä½œã€æ‰¹å½’ä¸€åŒ–å’Œæ¿€æ´»å‡½æ•°ï¼Œæä¾›äº†ä¸€ä¸ªç®€æ´çš„æ¥å£æ¥æ‰§è¡Œå·ç§¯æ“ä½œã€‚

æ–‡ä»¶çš„æœ€åå®šä¹‰äº†ä¸€ä¸ª`get_temperature`å‡½æ•°ï¼Œç”¨äºæ ¹æ®å½“å‰çš„è®­ç»ƒè¿­ä»£å’Œæ€»çš„è®­ç»ƒå‘¨æœŸè®¡ç®—æ¸©åº¦å€¼ï¼Œè¿™ä¸ªæ¸©åº¦å€¼ä¼šå½±å“æ³¨æ„åŠ›æœºåˆ¶çš„æƒé‡åˆ†é…ã€‚

æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶å®ç°äº†ä¸€ä¸ªçµæ´»çš„å·ç§¯å±‚å’Œæ³¨æ„åŠ›æœºåˆ¶ï¼Œèƒ½å¤Ÿåœ¨YOLOv8æ¨¡å‹ä¸­æœ‰æ•ˆåœ°ç®¡ç†å’Œåˆ©ç”¨å·ç§¯æ ¸ï¼Œæé«˜æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›å’Œæ€§èƒ½ã€‚

#### 11.4 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\yolo\pose\train.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
from ultralytics.models import yolo
from ultralytics.nn.tasks import PoseModel
from ultralytics.utils import DEFAULT_CFG, LOGGER

class PoseTrainer(yolo.detect.DetectionTrainer):
    """
    PoseTrainerç±»æ‰©å±•äº†DetectionTrainerç±»ï¼Œç”¨äºåŸºäºå§¿æ€æ¨¡å‹çš„è®­ç»ƒã€‚
    """

    def __init__(self, cfg=DEFAULT_CFG, overrides=None, _callbacks=None):
        """åˆå§‹åŒ–PoseTrainerå¯¹è±¡ï¼Œä½¿ç”¨æŒ‡å®šçš„é…ç½®å’Œè¦†ç›–å‚æ•°ã€‚"""
        if overrides is None:
            overrides = {}
        overrides['task'] = 'pose'  # è®¾ç½®ä»»åŠ¡ç±»å‹ä¸ºå§¿æ€ä¼°è®¡
        super().__init__(cfg, overrides, _callbacks)  # è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°

        # é’ˆå¯¹Apple MPSè®¾å¤‡çš„å·²çŸ¥é—®é¢˜å‘å‡ºè­¦å‘Š
        if isinstance(self.args.device, str) and self.args.device.lower() == 'mps':
            LOGGER.warning("WARNING âš ï¸ Apple MPS known Pose bug. Recommend 'device=cpu' for Pose models. "
                           'See https://github.com/ultralytics/ultralytics/issues/4031.')

    def get_model(self, cfg=None, weights=None, verbose=True):
        """æ ¹æ®æŒ‡å®šçš„é…ç½®å’Œæƒé‡è·å–å§¿æ€ä¼°è®¡æ¨¡å‹ã€‚"""
        model = PoseModel(cfg, ch=3, nc=self.data['nc'], data_kpt_shape=self.data['kpt_shape'], verbose=verbose)
        if weights:
            model.load(weights)  # åŠ è½½æ¨¡å‹æƒé‡

        return model  # è¿”å›æ¨¡å‹å®ä¾‹

    def set_model_attributes(self):
        """è®¾ç½®PoseModelçš„å…³é”®ç‚¹å½¢çŠ¶å±æ€§ã€‚"""
        super().set_model_attributes()  # è°ƒç”¨çˆ¶ç±»æ–¹æ³•
        self.model.kpt_shape = self.data['kpt_shape']  # è®¾ç½®å…³é”®ç‚¹å½¢çŠ¶

    def get_validator(self):
        """è¿”å›PoseValidatorç±»çš„å®ä¾‹ï¼Œç”¨äºéªŒè¯ã€‚"""
        self.loss_names = 'box_loss', 'pose_loss', 'kobj_loss', 'cls_loss', 'dfl_loss'  # å®šä¹‰æŸå¤±åç§°
        return yolo.pose.PoseValidator(self.test_loader, save_dir=self.save_dir, args=copy(self.args))  # è¿”å›éªŒè¯å™¨å®ä¾‹

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶ä¸€æ‰¹è®­ç»ƒæ ·æœ¬ï¼ŒåŒ…æ‹¬æ ‡æ³¨çš„ç±»åˆ«æ ‡ç­¾ã€è¾¹ç•Œæ¡†å’Œå…³é”®ç‚¹ã€‚"""
        images = batch['img']  # è·å–å›¾åƒ
        kpts = batch['keypoints']  # è·å–å…³é”®ç‚¹
        cls = batch['cls'].squeeze(-1)  # è·å–ç±»åˆ«
        bboxes = batch['bboxes']  # è·å–è¾¹ç•Œæ¡†
        paths = batch['im_file']  # è·å–å›¾åƒæ–‡ä»¶è·¯å¾„
        batch_idx = batch['batch_idx']  # è·å–æ‰¹æ¬¡ç´¢å¼•
        plot_images(images,
                    batch_idx,
                    cls,
                    bboxes,
                    kpts=kpts,
                    paths=paths,
                    fname=self.save_dir / f'train_batch{ni}.jpg',  # ä¿å­˜ç»˜åˆ¶çš„å›¾åƒ
                    on_plot=self.on_plot)

    def plot_metrics(self):
        """ç»˜åˆ¶è®­ç»ƒå’ŒéªŒè¯çš„æŒ‡æ ‡ã€‚"""
        plot_results(file=self.csv, pose=True, on_plot=self.on_plot)  # ä¿å­˜ç»“æœå›¾åƒ
```

### ä»£ç è¯´æ˜ï¼š
1. **PoseTrainerç±»**ï¼šè¿™æ˜¯ä¸€ä¸ªæ‰©å±•è‡ª`DetectionTrainer`çš„ç±»ï¼Œä¸“é—¨ç”¨äºå§¿æ€ä¼°è®¡æ¨¡å‹çš„è®­ç»ƒã€‚
2. **åˆå§‹åŒ–æ–¹æ³•**ï¼šåœ¨åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®ä»»åŠ¡ç±»å‹ä¸ºå§¿æ€ä¼°è®¡ï¼Œå¹¶å¤„ç†ç‰¹å®šè®¾å¤‡ï¼ˆå¦‚Apple MPSï¼‰çš„è­¦å‘Šã€‚
3. **è·å–æ¨¡å‹**ï¼š`get_model`æ–¹æ³•ç”¨äºåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå§¿æ€ä¼°è®¡æ¨¡å‹å®ä¾‹ï¼Œå¯ä»¥é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
4. **è®¾ç½®æ¨¡å‹å±æ€§**ï¼š`set_model_attributes`æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å…³é”®ç‚¹å½¢çŠ¶å±æ€§ã€‚
5. **è·å–éªŒè¯å™¨**ï¼š`get_validator`æ–¹æ³•è¿”å›ä¸€ä¸ªç”¨äºéªŒè¯çš„å®ä¾‹ï¼Œå®šä¹‰äº†æŸå¤±åç§°ã€‚
6. **ç»˜åˆ¶è®­ç»ƒæ ·æœ¬**ï¼š`plot_training_samples`æ–¹æ³•ç”¨äºå¯è§†åŒ–ä¸€æ‰¹è®­ç»ƒæ ·æœ¬ï¼ŒåŒ…æ‹¬å›¾åƒã€å…³é”®ç‚¹å’Œè¾¹ç•Œæ¡†ã€‚
7. **ç»˜åˆ¶æŒ‡æ ‡**ï¼š`plot_metrics`æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒå’ŒéªŒè¯è¿‡ç¨‹ä¸­çš„æŒ‡æ ‡ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ç”¨äºè®­ç»ƒåŸºäºYOLOv8çš„å§¿æ€ä¼°è®¡æ¨¡å‹çš„ä»£ç ï¼Œæ–‡ä»¶åä¸º`train.py`ï¼Œå±äºUltralyticsåº“çš„ä¸€éƒ¨åˆ†ã€‚ä»£ç ä¸­å®šä¹‰äº†ä¸€ä¸ªåä¸º`PoseTrainer`çš„ç±»ï¼Œè¯¥ç±»ç»§æ‰¿è‡ª`DetectionTrainer`ï¼Œä¸“é—¨ç”¨äºå¤„ç†å§¿æ€ä¼°è®¡ä»»åŠ¡ã€‚

åœ¨ç±»çš„æ„é€ å‡½æ•°`__init__`ä¸­ï¼Œé¦–å…ˆè®¾ç½®äº†ä¸€äº›é»˜è®¤é…ç½®å’Œå‚æ•°ã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰æä¾›è¦†ç›–å‚æ•°ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªç©ºå­—å…¸ï¼Œå¹¶å°†ä»»åŠ¡ç±»å‹è®¾ç½®ä¸º'pose'ã€‚æ¥ç€è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚å¦‚æœè®¾å¤‡è¢«è®¾ç½®ä¸º'MPS'ï¼ˆå³è‹¹æœçš„é‡‘å±æ€§èƒ½è®¡ç®—ï¼‰ï¼Œåˆ™ä¼šå‘å‡ºè­¦å‘Šï¼Œå»ºè®®ä½¿ç”¨'cpu'æ¥é¿å…å·²çŸ¥çš„Poseæ¨¡å‹é—®é¢˜ã€‚

`get_model`æ–¹æ³•ç”¨äºè·å–å§¿æ€ä¼°è®¡æ¨¡å‹ï¼Œæ¥å—é…ç½®å’Œæƒé‡å‚æ•°ã€‚å¦‚æœæä¾›äº†æƒé‡ï¼Œåˆ™ä¼šåŠ è½½è¿™äº›æƒé‡ã€‚æ¨¡å‹çš„åˆ›å»ºä½¿ç”¨äº†`PoseModel`ç±»ï¼Œå¹¶æ ¹æ®æ•°æ®é›†çš„ç±»åˆ«æ•°é‡å’Œå…³é”®ç‚¹å½¢çŠ¶è¿›è¡Œåˆå§‹åŒ–ã€‚

`set_model_attributes`æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å…³é”®ç‚¹å½¢çŠ¶å±æ€§ï¼Œç¡®ä¿æ¨¡å‹èƒ½å¤Ÿæ­£ç¡®å¤„ç†è¾“å…¥æ•°æ®çš„å…³é”®ç‚¹ä¿¡æ¯ã€‚

`get_validator`æ–¹æ³•è¿”å›ä¸€ä¸ª`PoseValidator`å®ä¾‹ï¼Œç”¨äºåœ¨éªŒè¯é˜¶æ®µè¯„ä¼°æ¨¡å‹çš„æ€§èƒ½ã€‚å®ƒä¼šè®°å½•æŸå¤±åç§°ï¼ŒåŒ…æ‹¬è¾¹ç•Œæ¡†æŸå¤±ã€å§¿æ€æŸå¤±ã€å…³é”®ç‚¹å¯¹è±¡æŸå¤±ã€ç±»åˆ«æŸå¤±å’Œåˆ†å¸ƒå¼ç„¦ç‚¹æŸå¤±ã€‚

`plot_training_samples`æ–¹æ³•ç”¨äºå¯è§†åŒ–ä¸€æ‰¹è®­ç»ƒæ ·æœ¬ï¼Œæ˜¾ç¤ºå›¾åƒã€ç±»åˆ«æ ‡ç­¾ã€è¾¹ç•Œæ¡†å’Œå…³é”®ç‚¹ã€‚å®ƒå°†è¿™äº›ä¿¡æ¯ç»˜åˆ¶åœ¨å›¾åƒä¸Šï¼Œå¹¶ä¿å­˜ä¸ºJPEGæ–‡ä»¶ã€‚

æœ€åï¼Œ`plot_metrics`æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒå’ŒéªŒè¯çš„æŒ‡æ ‡ï¼Œé€šè¿‡è°ƒç”¨`plot_results`å‡½æ•°æ¥ç”Ÿæˆç»“æœå›¾è¡¨ï¼Œå¹¶ä¿å­˜ä¸º`results.png`æ–‡ä»¶ã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶å®ç°äº†å§¿æ€ä¼°è®¡æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ¨¡å‹çš„åˆå§‹åŒ–ã€è®­ç»ƒæ ·æœ¬çš„å¯è§†åŒ–ä»¥åŠè®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡è®°å½•å’Œç»˜åˆ¶ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿›è¡Œæ¨¡å‹çš„è°ƒè¯•å’Œæ€§èƒ½è¯„ä¼°ã€‚

#### 11.5 train.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
class DetectionTrainer(BaseTrainer):
    """
    æ‰©å±•è‡ª BaseTrainer ç±»çš„æ£€æµ‹æ¨¡å‹è®­ç»ƒç±»ã€‚
    ç”¨äºè®­ç»ƒ YOLO æ£€æµ‹æ¨¡å‹ã€‚
    """

    def build_dataset(self, img_path, mode="train", batch=None):
        """
        æ„å»º YOLO æ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ï¼Œ`train` è¡¨ç¤ºè®­ç»ƒæ¨¡å¼ï¼Œ`val` è¡¨ç¤ºéªŒè¯æ¨¡å¼ã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…ç”¨äº `rect` æ¨¡å¼ã€‚é»˜è®¤ä¸º Noneã€‚
        """
        gs = max(int(de_parallel(self.model).stride.max() if self.model else 0), 32)
        return build_yolo_dataset(self.args, img_path, batch, self.data, mode=mode, rect=mode == "val", stride=gs)

    def get_dataloader(self, dataset_path, batch_size=16, rank=0, mode="train"):
        """æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚"""
        assert mode in ["train", "val"]  # ç¡®ä¿æ¨¡å¼æœ‰æ•ˆ
        with torch_distributed_zero_first(rank):  # åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œç¡®ä¿æ•°æ®é›†åªåˆå§‹åŒ–ä¸€æ¬¡
            dataset = self.build_dataset(dataset_path, mode, batch_size)  # æ„å»ºæ•°æ®é›†
        shuffle = mode == "train"  # è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®
        if getattr(dataset, "rect", False) and shuffle:
            LOGGER.warning("WARNING âš ï¸ 'rect=True' ä¸ DataLoader shuffle ä¸å…¼å®¹ï¼Œè®¾ç½® shuffle=False")
            shuffle = False  # å¦‚æœæ˜¯çŸ©å½¢æ¨¡å¼ï¼Œç¦ç”¨æ‰“ä¹±
        workers = self.args.workers if mode == "train" else self.args.workers * 2  # æ ¹æ®æ¨¡å¼è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
        return build_dataloader(dataset, batch_size, workers, shuffle, rank)  # è¿”å›æ•°æ®åŠ è½½å™¨

    def preprocess_batch(self, batch):
        """å¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚"""
        batch["img"] = batch["img"].to(self.device, non_blocking=True).float() / 255  # å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹æ•°å¹¶å½’ä¸€åŒ–
        if self.args.multi_scale:  # å¦‚æœå¯ç”¨å¤šå°ºåº¦è®­ç»ƒ
            imgs = batch["img"]
            sz = (
                random.randrange(self.args.imgsz * 0.5, self.args.imgsz * 1.5 + self.stride)
                // self.stride
                * self.stride
            )  # éšæœºé€‰æ‹©ä¸€ä¸ªæ–°çš„å°ºå¯¸
            sf = sz / max(imgs.shape[2:])  # è®¡ç®—ç¼©æ”¾å› å­
            if sf != 1:  # å¦‚æœç¼©æ”¾å› å­ä¸ä¸º1
                ns = [
                    math.ceil(x * sf / self.stride) * self.stride for x in imgs.shape[2:]
                ]  # è®¡ç®—æ–°çš„å½¢çŠ¶
                imgs = nn.functional.interpolate(imgs, size=ns, mode="bilinear", align_corners=False)  # è¿›è¡Œæ’å€¼ç¼©æ”¾
            batch["img"] = imgs  # æ›´æ–°æ‰¹æ¬¡å›¾åƒ
        return batch  # è¿”å›å¤„ç†åçš„æ‰¹æ¬¡

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å› YOLO æ£€æµ‹æ¨¡å‹ã€‚"""
        model = DetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)  # åˆ›å»ºæ£€æµ‹æ¨¡å‹
        if weights:
            model.load(weights)  # åŠ è½½æƒé‡
        return model  # è¿”å›æ¨¡å‹

    def get_validator(self):
        """è¿”å›ç”¨äº YOLO æ¨¡å‹éªŒè¯çš„ DetectionValidatorã€‚"""
        self.loss_names = "box_loss", "cls_loss", "dfl_loss"  # å®šä¹‰æŸå¤±åç§°
        return yolo.detect.DetectionValidator(
            self.test_loader, save_dir=self.save_dir, args=copy(self.args), _callbacks=self.callbacks
        )  # è¿”å›éªŒè¯å™¨

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶å¸¦æœ‰æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ã€‚"""
        plot_images(
            images=batch["img"],
            batch_idx=batch["batch_idx"],
            cls=batch["cls"].squeeze(-1),
            bboxes=batch["bboxes"],
            paths=batch["im_file"],
            fname=self.save_dir / f"train_batch{ni}.jpg",
            on_plot=self.on_plot,
        )  # ç»˜åˆ¶å›¾åƒå¹¶ä¿å­˜

    def plot_metrics(self):
        """ä» CSV æ–‡ä»¶ä¸­ç»˜åˆ¶æŒ‡æ ‡ã€‚"""
        plot_results(file=self.csv, on_plot=self.on_plot)  # ä¿å­˜ç»“æœå›¾
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜ï¼š
1. **DetectionTrainer ç±»**ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒ YOLO æ£€æµ‹æ¨¡å‹çš„ç±»ï¼Œç»§æ‰¿è‡ª `BaseTrainer`ã€‚
2. **build_dataset æ–¹æ³•**ï¼šæ„å»º YOLO æ•°æ®é›†ï¼Œå¤„ç†å›¾åƒè·¯å¾„å’Œæ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰ã€‚
3. **get_dataloader æ–¹æ³•**ï¼šæ„é€ æ•°æ®åŠ è½½å™¨ï¼Œç¡®ä¿åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­åªåˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†ã€‚
4. **preprocess_batch æ–¹æ³•**ï¼šå¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å½’ä¸€åŒ–å’Œå¤šå°ºåº¦å¤„ç†ã€‚
5. **get_model æ–¹æ³•**ï¼šè¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹ï¼Œå¯ä»¥é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
6. **get_validator æ–¹æ³•**ï¼šè¿”å›ç”¨äºæ¨¡å‹éªŒè¯çš„éªŒè¯å™¨ã€‚
7. **plot_training_samples å’Œ plot_metrics æ–¹æ³•**ï¼šç”¨äºå¯è§†åŒ–è®­ç»ƒæ ·æœ¬å’Œè®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `train.py` æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒ YOLOï¼ˆYou Only Look Onceï¼‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„å®ç°ï¼Œç»§æ‰¿è‡ª `BaseTrainer` ç±»ã€‚å®ƒåŒ…å«äº†ä¸€ç³»åˆ—ç”¨äºæ„å»ºæ•°æ®é›†ã€åŠ è½½æ•°æ®ã€é¢„å¤„ç†å›¾åƒã€è®¾ç½®æ¨¡å‹å±æ€§ã€è·å–æ¨¡å‹ã€éªŒè¯æ¨¡å‹ã€è®°å½•æŸå¤±ã€æ˜¾ç¤ºè®­ç»ƒè¿›åº¦ã€ç»˜åˆ¶è®­ç»ƒæ ·æœ¬å’Œç»˜åˆ¶è®­ç»ƒæŒ‡æ ‡çš„åŠŸèƒ½ã€‚

é¦–å…ˆï¼Œ`DetectionTrainer` ç±»é€šè¿‡ `build_dataset` æ–¹æ³•æ„å»º YOLO æ•°æ®é›†ï¼Œæ”¯æŒè®­ç»ƒå’ŒéªŒè¯æ¨¡å¼ï¼Œå¹¶å…è®¸ç”¨æˆ·ä¸ºä¸åŒæ¨¡å¼è‡ªå®šä¹‰æ•°æ®å¢å¼ºã€‚è¯¥æ–¹æ³•æ¥æ”¶å›¾åƒè·¯å¾„ã€æ¨¡å¼å’Œæ‰¹é‡å¤§å°ä½œä¸ºå‚æ•°ï¼Œåˆ©ç”¨ `build_yolo_dataset` å‡½æ•°åˆ›å»ºæ•°æ®é›†ã€‚

æ¥ç€ï¼Œ`get_dataloader` æ–¹æ³•ç”¨äºæ„å»ºå’Œè¿”å›æ•°æ®åŠ è½½å™¨ã€‚å®ƒæ ¹æ®æ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰åˆå§‹åŒ–æ•°æ®é›†ï¼Œå¹¶è®¾ç½®æ˜¯å¦æ‰“ä¹±æ•°æ®ã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼Œè®­ç»ƒæ¨¡å¼ä¸‹çš„å·¥ä½œçº¿ç¨‹æ•°é‡æ˜¯éªŒè¯æ¨¡å¼çš„ä¸¤å€ã€‚

åœ¨æ•°æ®é¢„å¤„ç†æ–¹é¢ï¼Œ`preprocess_batch` æ–¹æ³•å¯¹å›¾åƒè¿›è¡Œç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚å®ƒæ”¯æŒå¤šå°ºåº¦è®­ç»ƒï¼Œé€šè¿‡éšæœºé€‰æ‹©å›¾åƒå¤§å°å¹¶è°ƒæ•´å›¾åƒå°ºå¯¸æ¥å®ç°ã€‚

`set_model_attributes` æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œç±»åˆ«åç§°ã€‚è¿™äº›å±æ€§æ˜¯ä»æ•°æ®é›†ä¸­æå–çš„ï¼Œç¡®ä¿æ¨¡å‹èƒ½å¤Ÿæ­£ç¡®å¤„ç†ç‰¹å®šä»»åŠ¡ã€‚

`get_model` æ–¹æ³•è¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹ï¼Œå¹¶å¯ä»¥åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚`get_validator` æ–¹æ³•åˆ™è¿”å›ä¸€ä¸ªç”¨äºæ¨¡å‹éªŒè¯çš„ `DetectionValidator` å®ä¾‹ã€‚

åœ¨æŸå¤±è®°å½•æ–¹é¢ï¼Œ`label_loss_items` æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«è®­ç»ƒæŸå¤±é¡¹çš„å­—å…¸ï¼Œä¾¿äºç›‘æ§è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŸå¤±å˜åŒ–ã€‚

`progress_string` æ–¹æ³•ç”Ÿæˆä¸€ä¸ªæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œç”¨äºæ˜¾ç¤ºè®­ç»ƒè¿›åº¦ï¼ŒåŒ…æ‹¬å½“å‰çš„è½®æ¬¡ã€GPU å†…å­˜ä½¿ç”¨æƒ…å†µã€æŸå¤±å€¼ã€å®ä¾‹æ•°é‡å’Œå›¾åƒå¤§å°ã€‚

æ­¤å¤–ï¼Œ`plot_training_samples` æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ ‡æ³¨ï¼Œä¾¿äºå¯è§†åŒ–è®­ç»ƒæ•°æ®çš„è´¨é‡ã€‚`plot_metrics` å’Œ `plot_training_labels` æ–¹æ³•åˆ™åˆ†åˆ«ç”¨äºç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œæ ‡æ³¨ä¿¡æ¯ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£æ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶ï¼Œç”¨äºè®­ç»ƒ YOLO æ¨¡å‹ï¼Œæ”¯æŒæ•°æ®å¤„ç†ã€æ¨¡å‹è®¾ç½®ã€è®­ç»ƒç›‘æ§å’Œç»“æœå¯è§†åŒ–ç­‰åŠŸèƒ½ï¼Œé€‚åˆäºç›®æ ‡æ£€æµ‹ä»»åŠ¡çš„ç ”ç©¶å’Œåº”ç”¨ã€‚

#### 11.6 code\ultralytics\trackers\utils\gmc.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å¹¶æ·»åŠ è¯¦ç»†ä¸­æ–‡æ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import cv2
import numpy as np

class GMC:
    """
    é€šç”¨è¿åŠ¨è¡¥å¿ï¼ˆGMCï¼‰ç±»ï¼Œç”¨äºè§†é¢‘å¸§ä¸­çš„è·Ÿè¸ªå’Œç‰©ä½“æ£€æµ‹ã€‚
    æ”¯æŒå¤šç§è·Ÿè¸ªç®—æ³•ï¼ŒåŒ…æ‹¬ORBã€SIFTã€ECCå’Œç¨€ç–å…‰æµã€‚
    """

    def __init__(self, method: str = "sparseOptFlow", downscale: int = 2) -> None:
        """
        åˆå§‹åŒ–GMCå¯¹è±¡ï¼Œè®¾ç½®è·Ÿè¸ªæ–¹æ³•å’Œç¼©æ”¾å› å­ã€‚

        å‚æ•°:
            method (str): è·Ÿè¸ªæ–¹æ³•ï¼ŒåŒ…æ‹¬'orb'ã€'sift'ã€'ecc'ã€'sparseOptFlow'ã€‚
            downscale (int): å¤„ç†å¸§çš„ç¼©æ”¾å› å­ã€‚
        """
        self.method = method
        self.downscale = max(1, int(downscale))  # ç¡®ä¿ç¼©æ”¾å› å­è‡³å°‘ä¸º1

        # æ ¹æ®é€‰æ‹©çš„è·Ÿè¸ªæ–¹æ³•åˆå§‹åŒ–æ£€æµ‹å™¨ã€æå–å™¨å’ŒåŒ¹é…å™¨
        if self.method == "orb":
            self.detector = cv2.FastFeatureDetector_create(20)
            self.extractor = cv2.ORB_create()
            self.matcher = cv2.BFMatcher(cv2.NORM_HAMMING)
        elif self.method == "sift":
            self.detector = cv2.SIFT_create()
            self.extractor = cv2.SIFT_create()
            self.matcher = cv2.BFMatcher(cv2.NORM_L2)
        elif self.method == "ecc":
            self.warp_mode = cv2.MOTION_EUCLIDEAN
            self.criteria = (cv2.TERM_CRITERIA_EPS | cv2.TERM_CRITERIA_COUNT, 5000, 1e-6)
        elif self.method == "sparseOptFlow":
            self.feature_params = dict(maxCorners=1000, qualityLevel=0.01, minDistance=1, blockSize=3)
        elif self.method in {"none", "None", None}:
            self.method = None
        else:
            raise ValueError(f"é”™è¯¯: æœªçŸ¥çš„GMCæ–¹æ³•: {method}")

        # åˆå§‹åŒ–å‰ä¸€å¸§å’Œå…³é”®ç‚¹
        self.prevFrame = None
        self.prevKeyPoints = None
        self.prevDescriptors = None
        self.initializedFirstFrame = False

    def apply(self, raw_frame: np.array) -> np.array:
        """
        æ ¹æ®æŒ‡å®šçš„æ–¹æ³•å¯¹åŸå§‹å¸§è¿›è¡Œå¤„ç†ã€‚

        å‚æ•°:
            raw_frame (np.array): è¦å¤„ç†çš„åŸå§‹å¸§ã€‚

        è¿”å›:
            (np.array): å¤„ç†åçš„å¸§ã€‚
        """
        if self.method in ["orb", "sift"]:
            return self.applyFeatures(raw_frame)
        elif self.method == "ecc":
            return self.applyEcc(raw_frame)
        elif self.method == "sparseOptFlow":
            return self.applySparseOptFlow(raw_frame)
        else:
            return np.eye(2, 3)  # è¿”å›å•ä½çŸ©é˜µ

    def applyEcc(self, raw_frame: np.array) -> np.array:
        """
        å¯¹åŸå§‹å¸§åº”ç”¨ECCç®—æ³•ã€‚

        å‚æ•°:
            raw_frame (np.array): è¦å¤„ç†çš„åŸå§‹å¸§ã€‚

        è¿”å›:
            (np.array): å¤„ç†åçš„å¸§ã€‚
        """
        height, width, _ = raw_frame.shape
        frame = cv2.cvtColor(raw_frame, cv2.COLOR_BGR2GRAY)  # è½¬æ¢ä¸ºç°åº¦å›¾
        H = np.eye(2, 3, dtype=np.float32)  # åˆå§‹åŒ–å˜æ¢çŸ©é˜µ

        # æ ¹æ®ç¼©æ”¾å› å­å¯¹å›¾åƒè¿›è¡Œä¸‹é‡‡æ ·
        if self.downscale > 1.0:
            frame = cv2.resize(frame, (width // self.downscale, height // self.downscale))

        # å¤„ç†ç¬¬ä¸€å¸§
        if not self.initializedFirstFrame:
            self.prevFrame = frame.copy()  # ä¿å­˜å½“å‰å¸§
            self.initializedFirstFrame = True
            return H

        # è¿è¡ŒECCç®—æ³•
        try:
            (cc, H) = cv2.findTransformECC(self.prevFrame, frame, H, self.warp_mode, self.criteria)
        except Exception as e:
            print(f"è­¦å‘Š: å˜æ¢å¤±è´¥ï¼Œä½¿ç”¨å•ä½çŸ©é˜µ {e}")

        return H

    def applyFeatures(self, raw_frame: np.array) -> np.array:
        """
        å¯¹åŸå§‹å¸§åº”ç”¨ç‰¹å¾æ£€æµ‹æ–¹æ³•ï¼ˆå¦‚ORBæˆ–SIFTï¼‰ã€‚

        å‚æ•°:
            raw_frame (np.array): è¦å¤„ç†çš„åŸå§‹å¸§ã€‚

        è¿”å›:
            (np.array): å¤„ç†åçš„å¸§ã€‚
        """
        height, width, _ = raw_frame.shape
        frame = cv2.cvtColor(raw_frame, cv2.COLOR_BGR2GRAY)  # è½¬æ¢ä¸ºç°åº¦å›¾
        H = np.eye(2, 3)  # åˆå§‹åŒ–å˜æ¢çŸ©é˜µ

        # æ ¹æ®ç¼©æ”¾å› å­å¯¹å›¾åƒè¿›è¡Œä¸‹é‡‡æ ·
        if self.downscale > 1.0:
            frame = cv2.resize(frame, (width // self.downscale, height // self.downscale))

        # æ£€æµ‹å…³é”®ç‚¹
        keypoints = self.detector.detect(frame, None)

        # å¤„ç†ç¬¬ä¸€å¸§
        if not self.initializedFirstFrame:
            self.prevFrame = frame.copy()
            self.prevKeyPoints = keypoints
            self.initializedFirstFrame = True
            return H

        # åŒ¹é…æè¿°ç¬¦
        keypoints, descriptors = self.extractor.compute(frame, keypoints)
        knnMatches = self.matcher.knnMatch(self.prevDescriptors, descriptors, 2)

        # è¿‡æ»¤åŒ¹é…
        goodMatches = []
        for m, n in knnMatches:
            if m.distance < 0.75 * n.distance:  # åªä¿ç•™å¥½çš„åŒ¹é…
                goodMatches.append(m)

        # è®¡ç®—å˜æ¢çŸ©é˜µ
        if len(goodMatches) > 4:
            prevPoints = np.float32([self.prevKeyPoints[m.queryIdx].pt for m in goodMatches])
            currPoints = np.float32([keypoints[m.trainIdx].pt for m in goodMatches])
            H, _ = cv2.estimateAffinePartial2D(prevPoints, currPoints, method=cv2.RANSAC)

        self.prevFrame = frame.copy()
        self.prevKeyPoints = keypoints
        self.prevDescriptors = descriptors

        return H

    def applySparseOptFlow(self, raw_frame: np.array) -> np.array:
        """
        å¯¹åŸå§‹å¸§åº”ç”¨ç¨€ç–å…‰æµæ–¹æ³•ã€‚

        å‚æ•°:
            raw_frame (np.array): è¦å¤„ç†çš„åŸå§‹å¸§ã€‚

        è¿”å›:
            (np.array): å¤„ç†åçš„å¸§ã€‚
        """
        height, width, _ = raw_frame.shape
        frame = cv2.cvtColor(raw_frame, cv2.COLOR_BGR2GRAY)  # è½¬æ¢ä¸ºç°åº¦å›¾
        H = np.eye(2, 3)  # åˆå§‹åŒ–å˜æ¢çŸ©é˜µ

        # æ ¹æ®ç¼©æ”¾å› å­å¯¹å›¾åƒè¿›è¡Œä¸‹é‡‡æ ·
        if self.downscale > 1.0:
            frame = cv2.resize(frame, (width // self.downscale, height // self.downscale))

        # æ£€æµ‹å…³é”®ç‚¹
        keypoints = cv2.goodFeaturesToTrack(frame, mask=None, **self.feature_params)

        # å¤„ç†ç¬¬ä¸€å¸§
        if not self.initializedFirstFrame:
            self.prevFrame = frame.copy()
            self.prevKeyPoints = keypoints
            self.initializedFirstFrame = True
            return H

        # è®¡ç®—å…‰æµ
        matchedKeypoints, status, _ = cv2.calcOpticalFlowPyrLK(self.prevFrame, frame, self.prevKeyPoints, None)

        # è¿‡æ»¤æœ‰æ•ˆåŒ¹é…
        prevPoints = []
        currPoints = []
        for i in range(len(status)):
            if status[i]:
                prevPoints.append(self.prevKeyPoints[i])
                currPoints.append(matchedKeypoints[i])

        prevPoints = np.array(prevPoints)
        currPoints = np.array(currPoints)

        # è®¡ç®—å˜æ¢çŸ©é˜µ
        if len(prevPoints) > 4:
            H, _ = cv2.estimateAffinePartial2D(prevPoints, currPoints, method=cv2.RANSAC)

        self.prevFrame = frame.copy()
        self.prevKeyPoints = keypoints

        return H
```

### ä»£ç æ³¨é‡Šè¯´æ˜
1. **ç±»å’Œæ–¹æ³•è¯´æ˜**ï¼šåœ¨ç±»å’Œæ–¹æ³•çš„æ–‡æ¡£å­—ç¬¦ä¸²ä¸­ï¼Œè¯¦ç»†æè¿°äº†ç±»çš„åŠŸèƒ½ã€å‚æ•°å’Œè¿”å›å€¼ã€‚
2. **åˆå§‹åŒ–æ–¹æ³•**ï¼šåœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œè®¾ç½®äº†è·Ÿè¸ªæ–¹æ³•å’Œç¼©æ”¾å› å­ï¼Œå¹¶æ ¹æ®é€‰æ‹©çš„è·Ÿè¸ªæ–¹æ³•åˆå§‹åŒ–ç›¸åº”çš„æ£€æµ‹å™¨å’ŒåŒ¹é…å™¨ã€‚
3. **applyæ–¹æ³•**ï¼šæ ¹æ®é€‰æ‹©çš„è·Ÿè¸ªæ–¹æ³•è°ƒç”¨ç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚
4. **applyEccã€applyFeatureså’ŒapplySparseOptFlowæ–¹æ³•**ï¼šè¿™äº›æ–¹æ³•å®ç°äº†å…·ä½“çš„å›¾åƒå¤„ç†é€»è¾‘ï¼ŒåŒ…æ‹¬å…³é”®ç‚¹æ£€æµ‹ã€æè¿°ç¬¦åŒ¹é…å’Œå˜æ¢çŸ©é˜µè®¡ç®—ï¼Œå¹¶åœ¨å¤„ç†ç¬¬ä¸€å¸§æ—¶è¿›è¡Œåˆå§‹åŒ–ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º `GMC` çš„ç±»ï¼Œä¸»è¦ç”¨äºè§†é¢‘å¸§ä¸­çš„ç›®æ ‡è·Ÿè¸ªå’Œæ£€æµ‹ã€‚è¯¥ç±»å®ç°äº†å¤šç§è·Ÿè¸ªç®—æ³•ï¼ŒåŒ…æ‹¬ ORBã€SIFTã€ECC å’Œç¨€ç–å…‰æµï¼ˆSparse Optical Flowï¼‰ï¼Œå¹¶æ”¯æŒå¯¹å¸§è¿›è¡Œä¸‹é‡‡æ ·ä»¥æé«˜è®¡ç®—æ•ˆç‡ã€‚

åœ¨ `GMC` ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œç”¨æˆ·å¯ä»¥æŒ‡å®šè·Ÿè¸ªæ–¹æ³•å’Œä¸‹é‡‡æ ·å› å­ã€‚æ”¯æŒçš„è·Ÿè¸ªæ–¹æ³•åŒ…æ‹¬ `orb`ã€`sift`ã€`ecc`ã€`sparseOptFlow` å’Œ `none`ã€‚æ ¹æ®é€‰æ‹©çš„è·Ÿè¸ªæ–¹æ³•ï¼Œç¨‹åºä¼šåˆå§‹åŒ–ç›¸åº”çš„ç‰¹å¾æ£€æµ‹å™¨ã€æè¿°ç¬¦æå–å™¨å’ŒåŒ¹é…å™¨ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ ORB æ–¹æ³•æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå¿«é€Ÿç‰¹å¾æ£€æµ‹å™¨å’Œ ORB ç‰¹å¾æå–å™¨ï¼›è€Œä½¿ç”¨ SIFT æ–¹æ³•æ—¶ï¼Œåˆ™ä¼šåˆ›å»º SIFT ç‰¹å¾æ£€æµ‹å™¨å’Œæå–å™¨ã€‚

ç±»ä¸­æœ‰å‡ ä¸ªé‡è¦çš„å±æ€§ï¼Œç”¨äºå­˜å‚¨å‰ä¸€å¸§çš„å›¾åƒã€å…³é”®ç‚¹å’Œæè¿°ç¬¦ï¼Œä»¥åŠä¸€ä¸ªæ ‡å¿—ä½æ¥æŒ‡ç¤ºæ˜¯å¦å·²ç»å¤„ç†äº†ç¬¬ä¸€å¸§ã€‚ç±»çš„ä¸»è¦æ–¹æ³•æ˜¯ `apply`ï¼Œå®ƒæ ¹æ®æŒ‡å®šçš„è·Ÿè¸ªæ–¹æ³•å¤„ç†è¾“å…¥çš„åŸå§‹å¸§ï¼Œå¹¶è¿”å›å¤„ç†åçš„å¸§ã€‚å¦‚æœé€‰æ‹©çš„è·Ÿè¸ªæ–¹æ³•æ˜¯ ORB æˆ– SIFTï¼Œåˆ™è°ƒç”¨ `applyFeatures` æ–¹æ³•ï¼›å¦‚æœæ˜¯ ECCï¼Œåˆ™è°ƒç”¨ `applyEcc` æ–¹æ³•ï¼›å¦‚æœæ˜¯ç¨€ç–å…‰æµï¼Œåˆ™è°ƒç”¨ `applySparseOptFlow` æ–¹æ³•ã€‚

`applyEcc` æ–¹æ³•å®ç°äº†åŸºäº ECC ç®—æ³•çš„å›¾åƒé…å‡†ã€‚å®ƒé¦–å…ˆå°†è¾“å…¥å¸§è½¬æ¢ä¸ºç°åº¦å›¾åƒï¼Œå¹¶åœ¨å¿…è¦æ—¶è¿›è¡Œä¸‹é‡‡æ ·ã€‚ç„¶åï¼Œä½¿ç”¨ `cv2.findTransformECC` å‡½æ•°è®¡ç®—å‰ä¸€å¸§å’Œå½“å‰å¸§ä¹‹é—´çš„å˜æ¢çŸ©é˜µã€‚å¦‚æœæ˜¯ç¬¬ä¸€å¸§ï¼Œåˆ™ä»…è¿”å›å•ä½çŸ©é˜µã€‚

`applyFeatures` æ–¹æ³•åˆ™å®ç°äº†åŸºäºç‰¹å¾çš„æ–¹æ³•ï¼Œä½¿ç”¨ ORB æˆ– SIFT è¿›è¡Œå…³é”®ç‚¹æ£€æµ‹å’Œæè¿°ç¬¦è®¡ç®—ã€‚å®ƒåŒæ ·å¤„ç†ä¸‹é‡‡æ ·ï¼Œå¹¶ä½¿ç”¨æ©ç æ¥æ’é™¤æ£€æµ‹åˆ°çš„ç›®æ ‡åŒºåŸŸã€‚è¯¥æ–¹æ³•ä¼šåŒ¹é…å‰ä¸€å¸§å’Œå½“å‰å¸§çš„æè¿°ç¬¦ï¼Œå¹¶é€šè¿‡ RANSAC ç®—æ³•ä¼°è®¡åˆšæ€§å˜æ¢çŸ©é˜µã€‚

`applySparseOptFlow` æ–¹æ³•å®ç°äº†ç¨€ç–å…‰æµæ³•ï¼Œä½¿ç”¨ `cv2.calcOpticalFlowPyrLK` å‡½æ•°æ¥æ‰¾åˆ°å‰ä¸€å¸§å’Œå½“å‰å¸§ä¹‹é—´çš„å…³é”®ç‚¹å¯¹åº”å…³ç³»ã€‚ä¸å‰é¢çš„æ–¹æ³•ç±»ä¼¼ï¼Œè¯¥æ–¹æ³•ä¹Ÿä¼šå¤„ç†ä¸‹é‡‡æ ·ï¼Œå¹¶åœ¨ç¬¬ä¸€å¸§æ—¶åˆå§‹åŒ–æ•°æ®ã€‚

æ­¤å¤–ï¼Œç±»ä¸­è¿˜æä¾›äº† `reset_params` æ–¹æ³•ï¼Œç”¨äºé‡ç½®è·Ÿè¸ªå™¨çš„å‚æ•°ï¼Œæ¸…ç©ºä¹‹å‰å­˜å‚¨çš„å¸§ã€å…³é”®ç‚¹å’Œæè¿°ç¬¦ã€‚

æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ªç±»æä¾›äº†ä¸€ç§çµæ´»çš„æ–¹å¼æ¥å¤„ç†è§†é¢‘å¸§ä¸­çš„ç›®æ ‡è·Ÿè¸ªå’Œæ£€æµ‹ï¼Œå…è®¸ç”¨æˆ·æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„ç®—æ³•å’Œå‚æ•°ã€‚

### 12.ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆèŠ‚é€‰ï¼‰

### æ•´ä½“åŠŸèƒ½å’Œæ„æ¶æ¦‚æ‹¬

è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºYOLOv8ç®—æ³•çš„ç›®æ ‡æ£€æµ‹å’Œå§¿æ€ä¼°è®¡æ¡†æ¶ï¼Œæä¾›äº†å¤šç§æ¨¡å‹è®­ç»ƒã€æ¨ç†å’Œè·Ÿè¸ªçš„åŠŸèƒ½ã€‚æ•´ä½“æ¶æ„åˆ†ä¸ºå‡ ä¸ªä¸»è¦æ¨¡å—ï¼ŒåŒ…æ‹¬æ¨¡å‹è®­ç»ƒã€æ•°æ®å¤„ç†ã€ç‰¹å¾æå–ã€è·Ÿè¸ªç®—æ³•ã€å¯è§†åŒ–å’Œå›è°ƒå‡½æ•°ç­‰ã€‚æ¯ä¸ªæ¨¡å—é€šè¿‡ç±»å’Œå‡½æ•°è¿›è¡Œç»„ç»‡ï¼Œç¡®ä¿ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

- **æ¨¡å‹è®­ç»ƒ**ï¼šå®ç°äº†YOLOv8æ¨¡å‹çš„è®­ç»ƒå’ŒéªŒè¯ï¼Œæ”¯æŒç›®æ ‡æ£€æµ‹å’Œå§¿æ€ä¼°è®¡ä»»åŠ¡ã€‚
- **æ•°æ®å¤„ç†**ï¼šåŒ…æ‹¬æ•°æ®é›†çš„æ„å»ºã€æ•°æ®åŠ è½½å’Œé¢„å¤„ç†ï¼Œç¡®ä¿è¾“å…¥æ•°æ®ç¬¦åˆæ¨¡å‹è¦æ±‚ã€‚
- **ç‰¹å¾æå–ä¸è·Ÿè¸ª**ï¼šå®ç°äº†å¤šç§ç‰¹å¾æå–å’Œè·Ÿè¸ªç®—æ³•ï¼Œæ”¯æŒè§†é¢‘å¸§ä¸­çš„ç›®æ ‡è·Ÿè¸ªã€‚
- **å¯è§†åŒ–**ï¼šæä¾›äº†å¯è§†åŒ–è®­ç»ƒæ ·æœ¬å’Œè®­ç»ƒè¿‡ç¨‹æŒ‡æ ‡çš„åŠŸèƒ½ï¼Œä¾¿äºç”¨æˆ·ç›‘æ§æ¨¡å‹æ€§èƒ½ã€‚
- **å›è°ƒå‡½æ•°**ï¼šå®ç°äº†è®­ç»ƒè¿‡ç¨‹ä¸­çš„å›è°ƒæœºåˆ¶ï¼Œæ”¯æŒè‡ªåŠ¨è°ƒå‚å’Œæ¨¡å‹ä¿å­˜ç­‰åŠŸèƒ½ã€‚

### æ–‡ä»¶åŠŸèƒ½æ•´ç†è¡¨

| æ–‡ä»¶è·¯å¾„                                                                                                 | åŠŸèƒ½æè¿°                                                                                         |
|----------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
| `ultralytics/models/yolo/segment/train.py`                                                              | å®ç°YOLOv8æ¨¡å‹çš„å›¾åƒåˆ†å‰²è®­ç»ƒï¼ŒåŒ…å«æ¨¡å‹åˆå§‹åŒ–ã€éªŒè¯å’Œå¯è§†åŒ–åŠŸèƒ½ã€‚                               |
| `ui.py`                                                                                                 | ç”¨äºè¿è¡ŒæŒ‡å®šçš„Streamlitè„šæœ¬ï¼Œæä¾›ç”¨æˆ·ç•Œé¢æ”¯æŒã€‚                                                 |
| `ultralytics/nn/extra_modules/kernel_warehouse.py`                                                     | å®šä¹‰è‡ªå®šä¹‰å·ç§¯å±‚å’Œæ³¨æ„åŠ›æœºåˆ¶ï¼Œæä¾›çµæ´»çš„å·ç§¯æ“ä½œå’Œå†…æ ¸ç®¡ç†ã€‚                                   |
| `ultralytics/models/yolo/pose/train.py`                                                                | å®ç°YOLOv8æ¨¡å‹çš„å§¿æ€ä¼°è®¡è®­ç»ƒï¼ŒåŒ…å«æ¨¡å‹åˆå§‹åŒ–ã€éªŒè¯å’Œå¯è§†åŒ–åŠŸèƒ½ã€‚                               |
| `train.py`                                                                                              | æä¾›YOLOæ¨¡å‹çš„è®­ç»ƒæ¡†æ¶ï¼Œæ”¯æŒæ•°æ®å¤„ç†ã€æ¨¡å‹è®¾ç½®ã€è®­ç»ƒç›‘æ§å’Œç»“æœå¯è§†åŒ–ã€‚                        |
| `ultralytics/trackers/utils/gmc.py`                                                                    | å®ç°è§†é¢‘å¸§ä¸­çš„ç›®æ ‡è·Ÿè¸ªå’Œæ£€æµ‹ï¼Œæ”¯æŒå¤šç§è·Ÿè¸ªç®—æ³•ï¼ˆå¦‚ORBã€SIFTã€ECCã€ç¨€ç–å…‰æµï¼‰ã€‚               |
| `ultralytics/utils/callbacks/hub.py`                                                                   | æä¾›å›è°ƒå‡½æ•°çš„å®ç°ï¼Œç”¨äºè®­ç»ƒè¿‡ç¨‹ä¸­çš„è‡ªåŠ¨è°ƒå‚å’Œæ¨¡å‹ç®¡ç†ã€‚                                       |
| `ultralytics/data/explorer/explorer.py`                                                                | æä¾›æ•°æ®é›†çš„æ¢ç´¢å’Œå¯è§†åŒ–åŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£æ•°æ®é›†çš„ç»“æ„å’Œå†…å®¹ã€‚                                 |
| `ultralytics/data/build.py`                                                                             | è´Ÿè´£æ„å»ºæ•°æ®é›†ï¼Œå¤„ç†æ•°æ®åŠ è½½å’Œé¢„å¤„ç†ï¼Œç¡®ä¿æ•°æ®ç¬¦åˆæ¨¡å‹è¾“å…¥è¦æ±‚ã€‚                               |
| `ultralytics/utils/autobatch.py`                                                                        | å®ç°è‡ªåŠ¨æ‰¹å¤„ç†åŠŸèƒ½ï¼Œæ ¹æ®å¯ç”¨èµ„æºåŠ¨æ€è°ƒæ•´æ‰¹é‡å¤§å°ï¼Œæé«˜è®­ç»ƒæ•ˆç‡ã€‚                               |
| `ultralytics/nn/extra_modules/afpn.py`                                                                 | å®ç°è‡ªé€‚åº”ç‰¹å¾é‡‘å­—å¡”ç½‘ç»œï¼ˆAFPNï¼‰ï¼Œç”¨äºå¢å¼ºç‰¹å¾æå–èƒ½åŠ›ã€‚                                       |
| `ultralytics/nn/extra_modules/dynamic_snake_conv.py`                                                  | å®ç°åŠ¨æ€è›‡å½¢å·ç§¯ï¼Œæä¾›æ›´çµæ´»çš„å·ç§¯æ“ä½œï¼Œé€‚åº”ä¸åŒçš„è¾“å…¥ç‰¹å¾ã€‚                                   |
| `ultralytics/utils/callbacks/raytune.py`                                                               | æä¾›ä¸Ray Tuneé›†æˆçš„å›è°ƒå‡½æ•°ï¼Œç”¨äºè¶…å‚æ•°è°ƒä¼˜å’Œæ¨¡å‹è®­ç»ƒä¼˜åŒ–ã€‚                                   |

è¿™ä¸ªè¡¨æ ¼æ€»ç»“äº†æ¯ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿäº†è§£é¡¹ç›®çš„ç»“æ„å’Œå„ä¸ªæ¨¡å—çš„ä½œç”¨ã€‚

æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰â€ä¸­éƒ¨åˆ†ä»£ç å¯èƒ½ä¼šä¼˜åŒ–å‡çº§ï¼Œä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œå®Œæ•´â€œè®­ç»ƒæºç â€ã€â€œWebå‰ç«¯ç•Œé¢â€å’Œâ€œ70+ç§åˆ›æ–°ç‚¹æºç â€ä»¥â€œ13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–â€çš„å†…å®¹ä¸ºå‡†ã€‚

### 13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–

![19.png](19.png)


# [ä¸‹è½½é“¾æ¥ï¼šhttps://mbd.pub/o/bread/ZpuZlJ1t](https://mbd.pub/o/bread/ZpuZlJ1t)